{"remainingRequest":"F:\\个人git项目\\couldr-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\个人git项目\\couldr-admin\\src\\components\\CountDown\\CountDown.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\个人git项目\\couldr-admin\\src\\components\\CountDown\\CountDown.vue","mtime":1583417156380},{"path":"F:\\个人git项目\\couldr-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\个人git项目\\couldr-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\个人git项目\\couldr-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\个人git项目\\couldr-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KDQoNCmZ1bmN0aW9uIGZpeGVkWmVybyAodmFsKSB7DQogIHJldHVybiB2YWwgKiAxIDwgMTAgPyBgMCR7dmFsfWAgOiB2YWwNCn0NCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAnQ291bnREb3duJywNCiAgcHJvcHM6IHsNCiAgICBmb3JtYXQ6IHsNCiAgICAgIHR5cGU6IEZ1bmN0aW9uLA0KICAgICAgZGVmYXVsdDogdW5kZWZpbmVkDQogICAgfSwNCiAgICB0YXJnZXQ6IHsNCiAgICAgIHR5cGU6IFtEYXRlLCBOdW1iZXJdLA0KICAgICAgcmVxdWlyZWQ6IHRydWUNCiAgICB9LA0KICAgIG9uRW5kOiB7DQogICAgICB0eXBlOiBGdW5jdGlvbiwNCiAgICAgIGRlZmF1bHQ6ICgpID0+ICh7fSkNCiAgICB9DQogIH0sDQogIGRhdGEgKCkgew0KICAgIHJldHVybiB7DQogICAgICBkYXRlVGltZTogJzAnLA0KICAgICAgb3JpZ2luVGFyZ2V0VGltZTogMCwNCiAgICAgIGxhc3RUaW1lOiAwLA0KICAgICAgdGltZXI6IDAsDQogICAgICBpbnRlcnZhbDogMTAwMA0KICAgIH0NCiAgfSwNCiAgZmlsdGVyczogew0KICAgIGZvcm1hdCAodGltZSkgew0KICAgICAgY29uc3QgaG91cnMgPSA2MCAqIDYwICogMTAwMA0KICAgICAgY29uc3QgbWludXRlcyA9IDYwICogMTAwMA0KDQogICAgICBjb25zdCBoID0gTWF0aC5mbG9vcih0aW1lIC8gaG91cnMpDQogICAgICBjb25zdCBtID0gTWF0aC5mbG9vcigodGltZSAtIGggKiBob3VycykgLyBtaW51dGVzKQ0KICAgICAgY29uc3QgcyA9IE1hdGguZmxvb3IoKHRpbWUgLSBoICogaG91cnMgLSBtICogbWludXRlcykgLyAxMDAwKQ0KICAgICAgcmV0dXJuIGAke2ZpeGVkWmVybyhoKX06JHtmaXhlZFplcm8obSl9OiR7Zml4ZWRaZXJvKHMpfWANCiAgICB9DQogIH0sDQogIGNyZWF0ZWQgKCkgew0KICAgIHRoaXMuaW5pdFRpbWUoKQ0KICAgIHRoaXMudGljaygpDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBpbml0VGltZSAoKSB7DQogICAgICBsZXQgbGFzdFRpbWUgPSAwDQogICAgICBsZXQgdGFyZ2V0VGltZSA9IDANCiAgICAgIHRoaXMub3JpZ2luVGFyZ2V0VGltZSA9IHRoaXMudGFyZ2V0DQogICAgICB0cnkgew0KICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHRoaXMudGFyZ2V0KSA9PT0gJ1tvYmplY3QgRGF0ZV0nKSB7DQogICAgICAgICAgdGFyZ2V0VGltZSA9IHRoaXMudGFyZ2V0DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGFyZ2V0VGltZSA9IG5ldyBEYXRlKHRoaXMudGFyZ2V0KS5nZXRUaW1lKCkNCiAgICAgICAgfQ0KICAgICAgfSBjYXRjaCAoZSkgew0KICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgdGFyZ2V0IHByb3AnKQ0KICAgICAgfQ0KDQogICAgICBsYXN0VGltZSA9IHRhcmdldFRpbWUgLSBuZXcgRGF0ZSgpLmdldFRpbWUoKQ0KDQogICAgICB0aGlzLmxhc3RUaW1lID0gbGFzdFRpbWUgPCAwID8gMCA6IGxhc3RUaW1lDQogICAgfSwNCiAgICB0aWNrICgpIHsNCiAgICAgIGNvbnN0IHsgb25FbmQgfSA9IHRoaXMNCg0KICAgICAgdGhpcy50aW1lciA9IHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICBpZiAodGhpcy5sYXN0VGltZSA8IHRoaXMuaW50ZXJ2YWwpIHsNCiAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lcikNCiAgICAgICAgICB0aGlzLmxhc3RUaW1lID0gMA0KICAgICAgICAgIGlmICh0eXBlb2Ygb25FbmQgPT09ICdmdW5jdGlvbicpIHsNCiAgICAgICAgICAgIG9uRW5kKCkNCiAgICAgICAgICB9DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGhpcy5sYXN0VGltZSAtPSB0aGlzLmludGVydmFsDQogICAgICAgICAgdGhpcy50aWNrKCkNCiAgICAgICAgfQ0KICAgICAgfSwgdGhpcy5pbnRlcnZhbCkNCiAgICB9DQogIH0sDQogIGJlZm9yZVVwZGF0ZSAoKSB7DQogICAgaWYgKHRoaXMub3JpZ2luVGFyZ2V0VGltZSAhPT0gdGhpcy50YXJnZXQpIHsNCiAgICAgIHRoaXMuaW5pdFRpbWUoKQ0KICAgIH0NCiAgfSwNCiAgYmVmb3JlRGVzdHJveSAoKSB7DQogICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZXIpDQogIH0NCn0NCg=="},{"version":3,"sources":["CountDown.vue"],"names":[],"mappings":";;;;;;;;AAQA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CountDown.vue","sourceRoot":"src/components/CountDown","sourcesContent":["<template>\r\n  <span>\r\n    {{ lastTime | format }}\r\n  </span>\r\n</template>\r\n\r\n<script>\r\n\r\nfunction fixedZero (val) {\r\n  return val * 1 < 10 ? `0${val}` : val\r\n}\r\n\r\nexport default {\r\n  name: 'CountDown',\r\n  props: {\r\n    format: {\r\n      type: Function,\r\n      default: undefined\r\n    },\r\n    target: {\r\n      type: [Date, Number],\r\n      required: true\r\n    },\r\n    onEnd: {\r\n      type: Function,\r\n      default: () => ({})\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      dateTime: '0',\r\n      originTargetTime: 0,\r\n      lastTime: 0,\r\n      timer: 0,\r\n      interval: 1000\r\n    }\r\n  },\r\n  filters: {\r\n    format (time) {\r\n      const hours = 60 * 60 * 1000\r\n      const minutes = 60 * 1000\r\n\r\n      const h = Math.floor(time / hours)\r\n      const m = Math.floor((time - h * hours) / minutes)\r\n      const s = Math.floor((time - h * hours - m * minutes) / 1000)\r\n      return `${fixedZero(h)}:${fixedZero(m)}:${fixedZero(s)}`\r\n    }\r\n  },\r\n  created () {\r\n    this.initTime()\r\n    this.tick()\r\n  },\r\n  methods: {\r\n    initTime () {\r\n      let lastTime = 0\r\n      let targetTime = 0\r\n      this.originTargetTime = this.target\r\n      try {\r\n        if (Object.prototype.toString.call(this.target) === '[object Date]') {\r\n          targetTime = this.target\r\n        } else {\r\n          targetTime = new Date(this.target).getTime()\r\n        }\r\n      } catch (e) {\r\n        throw new Error('invalid target prop')\r\n      }\r\n\r\n      lastTime = targetTime - new Date().getTime()\r\n\r\n      this.lastTime = lastTime < 0 ? 0 : lastTime\r\n    },\r\n    tick () {\r\n      const { onEnd } = this\r\n\r\n      this.timer = setTimeout(() => {\r\n        if (this.lastTime < this.interval) {\r\n          clearTimeout(this.timer)\r\n          this.lastTime = 0\r\n          if (typeof onEnd === 'function') {\r\n            onEnd()\r\n          }\r\n        } else {\r\n          this.lastTime -= this.interval\r\n          this.tick()\r\n        }\r\n      }, this.interval)\r\n    }\r\n  },\r\n  beforeUpdate () {\r\n    if (this.originTargetTime !== this.target) {\r\n      this.initTime()\r\n    }\r\n  },\r\n  beforeDestroy () {\r\n    clearTimeout(this.timer)\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n"]}]}