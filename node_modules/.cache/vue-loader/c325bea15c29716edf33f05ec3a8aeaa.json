{"remainingRequest":"F:\\个人git项目\\couldr-user\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\个人git项目\\couldr-user\\node_modules\\v-contextmenu\\src\\components\\Contextmenu.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\个人git项目\\couldr-user\\node_modules\\v-contextmenu\\src\\components\\Contextmenu.vue","mtime":499162500000},{"path":"F:\\个人git项目\\couldr-user\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\个人git项目\\couldr-user\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\个人git项目\\couldr-user\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\个人git项目\\couldr-user\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnVkNvbnRleHRtZW51JywKCiAgcHJvdmlkZSAoKSB7CiAgICByZXR1cm4gewogICAgICAkJGNvbnRleHRtZW51OiB0aGlzLAogICAgfQogIH0sCgogIHByb3BzOiB7CiAgICBldmVudFR5cGU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnY29udGV4dG1lbnUnLAogICAgfSwKICAgIHRoZW1lOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJ2RlZmF1bHQnLAogICAgfSwKICAgIGF1dG9QbGFjZW1lbnQ6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogdHJ1ZSwKICAgIH0sCiAgICBkaXNhYmxlZDogQm9vbGVhbiwKICB9LAoKICBkYXRhICgpIHsKICAgIHJldHVybiB7CiAgICAgIHZpc2libGU6IGZhbHNlLAogICAgICByZWZlcmVuY2VzOiBbXSwKICAgICAgc3R5bGU6IHsKICAgICAgICB0b3A6IDAsCiAgICAgICAgbGVmdDogMCwKICAgICAgfSwKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBjbGlja091dHNpZGVIYW5kbGVyICgpIHsKICAgICAgcmV0dXJuIHRoaXMudmlzaWJsZSA/IHRoaXMuaGlkZSA6ICgpID0+IHt9CiAgICB9LAogICAgaXNDbGljayAoKSB7CiAgICAgIHJldHVybiB0aGlzLmV2ZW50VHlwZSA9PT0gJ2NsaWNrJwogICAgfSwKICAgIGNvbnRleHRtZW51Q2xzICgpIHsKICAgICAgcmV0dXJuIFsKICAgICAgICAndi1jb250ZXh0bWVudScsCiAgICAgICAgYHYtY29udGV4dG1lbnUtLSR7dGhpcy50aGVtZX1gLAogICAgICBdCiAgICB9LAogIH0sCgogIHdhdGNoOiB7CiAgICB2aXNpYmxlICh2YWx1ZSkgewogICAgICBpZiAodmFsdWUpIHsKICAgICAgICB0aGlzLiRlbWl0KCdzaG93JywgdGhpcykKCiAgICAgICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuaGFuZGxlQm9keUNsaWNrKQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJGVtaXQoJ2hpZGUnLCB0aGlzKQoKICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5oYW5kbGVCb2R5Q2xpY2spCiAgICAgIH0KICAgIH0sCiAgfSwKICBtb3VudGVkICgpIHsKICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy4kZWwpCgogICAgaWYgKHdpbmRvdy4kJFZDb250ZXh0bWVudSkgewogICAgICB3aW5kb3cuJCRWQ29udGV4dG1lbnVbdGhpcy4kY29udGV4dG1lbnVJZF0gPSB0aGlzCiAgICB9IGVsc2UgewogICAgICB3aW5kb3cuJCRWQ29udGV4dG1lbnUgPSB7IFt0aGlzLiRjb250ZXh0bWVudUlkXTogdGhpcyB9CiAgICB9CiAgfSwKICBiZWZvcmVEZXN0cm95ICgpIHsKICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQodGhpcy4kZWwpCgogICAgZGVsZXRlIHdpbmRvdy4kJFZDb250ZXh0bWVudVt0aGlzLiRjb250ZXh0bWVudUlkXQoKICAgIHRoaXMucmVmZXJlbmNlcy5mb3JFYWNoKChyZWYpID0+IHsKICAgICAgcmVmLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIodGhpcy5ldmVudFR5cGUsIHRoaXMuaGFuZGxlUmVmZXJlbmNlQ29udGV4dG1lbnUpCiAgICB9KQoKICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmhhbmRsZUJvZHlDbGljaykKICB9LAoKICBtZXRob2RzOiB7CiAgICBhZGRSZWYgKHJlZikgewogICAgICAvLyBGSVhNRTog5aaC5L2V5aSE55CGIHJlbW92ZVJlZu+8nwogICAgICB0aGlzLnJlZmVyZW5jZXMucHVzaChyZWYpCgogICAgICByZWYuZWwuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLmV2ZW50VHlwZSwgdGhpcy5oYW5kbGVSZWZlcmVuY2VDb250ZXh0bWVudSkKICAgIH0sCiAgICBoYW5kbGVSZWZlcmVuY2VDb250ZXh0bWVudSAoZXZlbnQpIHsKICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKQoKICAgICAgaWYgKHRoaXMuZGlzYWJsZWQpIHJldHVybgoKICAgICAgY29uc3QgcmVmZXJlbmNlID0gdGhpcy5yZWZlcmVuY2VzLmZpbmQocmVmID0+IHJlZi5lbC5jb250YWlucyhldmVudC50YXJnZXQpKQoKICAgICAgdGhpcy4kZW1pdCgnY29udGV4dG1lbnUnLCByZWZlcmVuY2UgPyByZWZlcmVuY2Uudm5vZGUgOiBudWxsKQoKICAgICAgY29uc3QgZXZlbnRYID0gZXZlbnQucGFnZVgKICAgICAgY29uc3QgZXZlbnRZID0gZXZlbnQucGFnZVkKCiAgICAgIHRoaXMuc2hvdygpCgogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgY29uc3QgY29udGV4dG1lbnVQb3NpdGlvbiA9IHsKICAgICAgICAgIHRvcDogZXZlbnRZLAogICAgICAgICAgbGVmdDogZXZlbnRYLAogICAgICAgIH0KCiAgICAgICAgaWYgKHRoaXMuYXV0b1BsYWNlbWVudCkgewogICAgICAgICAgY29uc3QgY29udGV4dG1lbnVXaWR0aCA9IHRoaXMuJHJlZnMuY29udGV4dG1lbnUuY2xpZW50V2lkdGgKICAgICAgICAgIGNvbnN0IGNvbnRleHRtZW51SGVpZ2h0ID0gdGhpcy4kcmVmcy5jb250ZXh0bWVudS5jbGllbnRIZWlnaHQKCiAgICAgICAgICBpZiAoY29udGV4dG1lbnVIZWlnaHQgKyBldmVudFkgPj0gd2luZG93LmlubmVySGVpZ2h0KSB7CiAgICAgICAgICAgIGNvbnRleHRtZW51UG9zaXRpb24udG9wIC09IGNvbnRleHRtZW51SGVpZ2h0CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGNvbnRleHRtZW51V2lkdGggKyBldmVudFggPj0gd2luZG93LmlubmVyV2lkdGgpIHsKICAgICAgICAgICAgY29udGV4dG1lbnVQb3NpdGlvbi5sZWZ0IC09IGNvbnRleHRtZW51V2lkdGgKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHRoaXMuc3R5bGUgPSB7CiAgICAgICAgICB0b3A6IGAke2NvbnRleHRtZW51UG9zaXRpb24udG9wfXB4YCwKICAgICAgICAgIGxlZnQ6IGAke2NvbnRleHRtZW51UG9zaXRpb24ubGVmdH1weGAsCiAgICAgICAgfQogICAgICB9KQogICAgfSwKICAgIGhhbmRsZUJvZHlDbGljayAoZXZlbnQpIHsKICAgICAgY29uc3Qgbm90T3V0c2lkZSA9IHRoaXMuJGVsLmNvbnRhaW5zKGV2ZW50LnRhcmdldCkgfHwgKAogICAgICAgIHRoaXMuaXNDbGljayAmJiB0aGlzLnJlZmVyZW5jZXMuc29tZShyZWYgPT4gcmVmLmVsLmNvbnRhaW5zKGV2ZW50LnRhcmdldCkpCiAgICAgICkKCiAgICAgIGlmICghbm90T3V0c2lkZSkgewogICAgICAgIHRoaXMudmlzaWJsZSA9IGZhbHNlCiAgICAgIH0KICAgIH0sCiAgICBzaG93IChwb3NpdGlvbikgewogICAgICBPYmplY3Qua2V5cyh3aW5kb3cuJCRWQ29udGV4dG1lbnUpCiAgICAgICAgLmZvckVhY2goKGtleSkgPT4gewogICAgICAgICAgaWYgKGtleSAhPT0gdGhpcy4kY29udGV4dG1lbnVJZCkgewogICAgICAgICAgICB3aW5kb3cuJCRWQ29udGV4dG1lbnVba2V5XS5oaWRlKCkKICAgICAgICAgIH0KICAgICAgICB9KQoKICAgICAgaWYgKHBvc2l0aW9uKSB7CiAgICAgICAgdGhpcy5zdHlsZSA9IHsKICAgICAgICAgIHRvcDogYCR7cG9zaXRpb24udG9wfXB4YCwKICAgICAgICAgIGxlZnQ6IGAke3Bvc2l0aW9uLmxlZnR9cHhgLAogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy52aXNpYmxlID0gdHJ1ZQogICAgfSwKICAgIGhpZGUgKCkgewogICAgICB0aGlzLnZpc2libGUgPSBmYWxzZQogICAgfSwKICAgIGhpZGVBbGwgKCkgewogICAgICBPYmplY3Qua2V5cyh3aW5kb3cuJCRWQ29udGV4dG1lbnUpCiAgICAgICAgLmZvckVhY2goKGtleSkgPT4gewogICAgICAgICAgd2luZG93LiQkVkNvbnRleHRtZW51W2tleV0uaGlkZSgpCiAgICAgICAgfSkKICAgIH0sCiAgfSwKfQo="},{"version":3,"sources":["Contextmenu.vue"],"names":[],"mappings":";;;;;;;;;;;;AAYA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Contextmenu.vue","sourceRoot":"node_modules/v-contextmenu/src/components","sourcesContent":["<template>\n  <ul\n    v-show=\"visible\"\n    ref=\"contextmenu\"\n    :class=\"contextmenuCls\"\n    :style=\"style\"\n  >\n    <slot />\n  </ul>\n</template>\n\n<script>\n  export default {\n    name: 'VContextmenu',\n\n    provide () {\n      return {\n        $$contextmenu: this,\n      }\n    },\n\n    props: {\n      eventType: {\n        type: String,\n        default: 'contextmenu',\n      },\n      theme: {\n        type: String,\n        default: 'default',\n      },\n      autoPlacement: {\n        type: Boolean,\n        default: true,\n      },\n      disabled: Boolean,\n    },\n\n    data () {\n      return {\n        visible: false,\n        references: [],\n        style: {\n          top: 0,\n          left: 0,\n        },\n      }\n    },\n    computed: {\n      clickOutsideHandler () {\n        return this.visible ? this.hide : () => {}\n      },\n      isClick () {\n        return this.eventType === 'click'\n      },\n      contextmenuCls () {\n        return [\n          'v-contextmenu',\n          `v-contextmenu--${this.theme}`,\n        ]\n      },\n    },\n\n    watch: {\n      visible (value) {\n        if (value) {\n          this.$emit('show', this)\n\n          document.body.addEventListener('click', this.handleBodyClick)\n        } else {\n          this.$emit('hide', this)\n\n          document.body.removeEventListener('click', this.handleBodyClick)\n        }\n      },\n    },\n    mounted () {\n      document.body.appendChild(this.$el)\n\n      if (window.$$VContextmenu) {\n        window.$$VContextmenu[this.$contextmenuId] = this\n      } else {\n        window.$$VContextmenu = { [this.$contextmenuId]: this }\n      }\n    },\n    beforeDestroy () {\n      document.body.removeChild(this.$el)\n\n      delete window.$$VContextmenu[this.$contextmenuId]\n\n      this.references.forEach((ref) => {\n        ref.el.removeEventListener(this.eventType, this.handleReferenceContextmenu)\n      })\n\n      document.body.removeEventListener('click', this.handleBodyClick)\n    },\n\n    methods: {\n      addRef (ref) {\n        // FIXME: 如何处理 removeRef？\n        this.references.push(ref)\n\n        ref.el.addEventListener(this.eventType, this.handleReferenceContextmenu)\n      },\n      handleReferenceContextmenu (event) {\n        event.preventDefault()\n\n        if (this.disabled) return\n\n        const reference = this.references.find(ref => ref.el.contains(event.target))\n\n        this.$emit('contextmenu', reference ? reference.vnode : null)\n\n        const eventX = event.pageX\n        const eventY = event.pageY\n\n        this.show()\n\n        this.$nextTick(() => {\n          const contextmenuPosition = {\n            top: eventY,\n            left: eventX,\n          }\n\n          if (this.autoPlacement) {\n            const contextmenuWidth = this.$refs.contextmenu.clientWidth\n            const contextmenuHeight = this.$refs.contextmenu.clientHeight\n\n            if (contextmenuHeight + eventY >= window.innerHeight) {\n              contextmenuPosition.top -= contextmenuHeight\n            }\n\n            if (contextmenuWidth + eventX >= window.innerWidth) {\n              contextmenuPosition.left -= contextmenuWidth\n            }\n          }\n\n          this.style = {\n            top: `${contextmenuPosition.top}px`,\n            left: `${contextmenuPosition.left}px`,\n          }\n        })\n      },\n      handleBodyClick (event) {\n        const notOutside = this.$el.contains(event.target) || (\n          this.isClick && this.references.some(ref => ref.el.contains(event.target))\n        )\n\n        if (!notOutside) {\n          this.visible = false\n        }\n      },\n      show (position) {\n        Object.keys(window.$$VContextmenu)\n          .forEach((key) => {\n            if (key !== this.$contextmenuId) {\n              window.$$VContextmenu[key].hide()\n            }\n          })\n\n        if (position) {\n          this.style = {\n            top: `${position.top}px`,\n            left: `${position.left}px`,\n          }\n        }\n\n        this.visible = true\n      },\n      hide () {\n        this.visible = false\n      },\n      hideAll () {\n        Object.keys(window.$$VContextmenu)\n          .forEach((key) => {\n            window.$$VContextmenu[key].hide()\n          })\n      },\n    },\n  }\n</script>\n"]}]}