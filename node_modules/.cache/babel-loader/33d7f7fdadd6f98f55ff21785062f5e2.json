{"remainingRequest":"F:\\个人git项目\\couldr-user\\node_modules\\babel-loader\\lib\\index.js!F:\\个人git项目\\couldr-user\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\个人git项目\\couldr-user\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\个人git项目\\couldr-user\\src\\views\\system\\Installation.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\个人git项目\\couldr-user\\src\\views\\system\\Installation.vue","mtime":1584854240511},{"path":"F:\\个人git项目\\couldr-user\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\个人git项目\\couldr-user\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\个人git项目\\couldr-user\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\个人git项目\\couldr-user\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBhZG1pbkFwaSBmcm9tICdAL2FwaS9hZG1pbic7CmltcG9ydCByZWNvdmVyeUFwaSBmcm9tICdAL2FwaS9yZWNvdmVyeSc7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaW5zdGFsbGF0aW9uOiB7fSwKICAgICAgbWlncmF0aW9uVXBsb2FkTmFtZTogJ2ZpbGUnLAogICAgICBtaWdyYXRpb25EYXRhOiBudWxsLAogICAgICBzdGVwQ3VycmVudDogMCwKICAgICAgYmxvZ2dlckZvcm06IHRoaXMuJGZvcm0uY3JlYXRlRm9ybSh0aGlzKQogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLnZlcmlmeUlzSW5zdGFsbCgpOwogICAgdGhpcy5pbnN0YWxsYXRpb24udXJsID0gd2luZG93LmxvY2F0aW9uLnByb3RvY29sICsgJy8vJyArIHdpbmRvdy5sb2NhdGlvbi5ob3N0OwogIH0sCiAgbWV0aG9kczogewogICAgdmVyaWZ5SXNJbnN0YWxsOiBmdW5jdGlvbiB2ZXJpZnlJc0luc3RhbGwoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBhZG1pbkFwaS5pc0luc3RhbGxlZCgpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuZGF0YSkgewogICAgICAgICAgX3RoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgbmFtZTogJ0xvZ2luJwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVOZXh0U3RlcDogZnVuY3Rpb24gaGFuZGxlTmV4dFN0ZXAoZSkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgdGhpcy5ibG9nZ2VyRm9ybS52YWxpZGF0ZUZpZWxkcyhmdW5jdGlvbiAoZXJyb3IsIHZhbHVlcykgewogICAgICAgIC8qIHRoaXMuJGxvZy5kZWJ1ZygnZXJyb3InLCBlcnJvcikNCiAgICAgICAgdGhpcy4kbG9nLmRlYnVnKCdSZWNlaXZlZCB2YWx1ZXMgb2YgZm9ybTogJywgdmFsdWVzKSAqLwogICAgICAgIGlmIChlcnJvciAhPSBudWxsKSB7fSBlbHNlIHsKICAgICAgICAgIF90aGlzMi5zdGVwQ3VycmVudCsrOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlTWlncmF0aW9uVXBsb2FkOiBmdW5jdGlvbiBoYW5kbGVNaWdyYXRpb25VcGxvYWQoZGF0YSkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHRoaXMuJGxvZy5kZWJ1ZygnU2VsZWN0ZWQgZGF0YScsIGRhdGEpOwogICAgICB0aGlzLm1pZ3JhdGlvbkRhdGEgPSBkYXRhOwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIF90aGlzMy4kbG9nLmRlYnVnKCdIYW5kbGUgdXBsb2FkaW5nJyk7CgogICAgICAgIHJlc29sdmUoKTsKICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlTWlncmF0aW9uRmlsZVJlbW92ZTogZnVuY3Rpb24gaGFuZGxlTWlncmF0aW9uRmlsZVJlbW92ZShmaWxlKSB7CiAgICAgIHRoaXMuJGxvZy5kZWJ1ZygnUmVtb3ZlZCBmaWxlJywgZmlsZSk7CiAgICAgIHRoaXMuJGxvZy5kZWJ1ZygnTWlncmF0aW9uIGZpbGUgZnJvbSBkYXRhJywgdGhpcy5taWdyYXRpb25EYXRhLmdldCh0aGlzLm1pZ3JhdGlvblVwbG9hZE5hbWUpKTsKCiAgICAgIGlmICh0aGlzLm1pZ3JhdGlvbkRhdGEuZ2V0KHRoaXMubWlncmF0aW9uVXBsb2FkTmFtZSkudWlkID09PSBmaWxlLnVpZCkgewogICAgICAgIHRoaXMubWlncmF0aW9uRGF0YSA9IG51bGw7CiAgICAgICAgdGhpcy5taWdyYXRpb25GaWxlID0gbnVsbDsKICAgICAgfQogICAgfSwKICAgIGluc3RhbGw6IGZ1bmN0aW9uIGluc3RhbGwoKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgYWRtaW5BcGkuaW5zdGFsbCh0aGlzLmluc3RhbGxhdGlvbikudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpczQuJGxvZy5kZWJ1ZygnSW5zdGFsbGF0aW9uIHJlc3BvbnNlJywgcmVzcG9uc2UpOwoKICAgICAgICBfdGhpczQuJG1lc3NhZ2Uuc3VjY2Vzcygn5a6J6KOF5oiQ5Yqf77yBJyk7CgogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXM0LiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgIG5hbWU6ICdMb2dpbicKICAgICAgICAgIH0pOwogICAgICAgIH0sIDMwMCk7CiAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZUluc3RhbGw6IGZ1bmN0aW9uIGhhbmRsZUluc3RhbGwoKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgdmFyIHBhc3N3b3JkID0gdGhpcy5pbnN0YWxsYXRpb24ucGFzc3dvcmQ7CiAgICAgIHZhciBjb25maXJtUGFzc3dvcmQgPSB0aGlzLmluc3RhbGxhdGlvbi5jb25maXJtUGFzc3dvcmQ7CiAgICAgIHRoaXMuJGxvZy5kZWJ1ZygnUGFzc3dvcmQnLCBwYXNzd29yZCk7CiAgICAgIHRoaXMuJGxvZy5kZWJ1ZygnQ29uZmlybSBwYXNzd29yZCcsIGNvbmZpcm1QYXNzd29yZCk7CgogICAgICBpZiAocGFzc3dvcmQgIT09IGNvbmZpcm1QYXNzd29yZCkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+ehruiupOWvhueggeWSjOWvhueggeS4jeWMuemFjScpOwogICAgICAgIHJldHVybjsKICAgICAgfSAvLyBIYW5kbGUgbWlncmF0aW9uCgoKICAgICAgaWYgKHRoaXMubWlncmF0aW9uRGF0YSkgewogICAgICAgIHJlY292ZXJ5QXBpLm1pZ3JhdGUodGhpcy5taWdyYXRpb25EYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgX3RoaXM1LiRsb2cuZGVidWcoJ01pZ3JhdGVkIHN1Y2Nlc3NmdWxsbHknKTsKCiAgICAgICAgICBfdGhpczUuJG1lc3NhZ2Uuc3VjY2Vzcygn5pWw5o2u6L+B56e75oiQ5Yqf77yBJyk7CgogICAgICAgICAgX3RoaXM1Lmluc3RhbGwoKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmluc3RhbGwoKTsKICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"sources":["Installation.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div>\r\n    <a-row\r\n      type=\"flex\"\r\n      justify=\"center\"\r\n      align=\"middle\"\r\n      style=\"height: 100vh;\"\r\n    >\r\n      <a-col\r\n        :xl=\"8\"\r\n        :md=\"12\"\r\n        :sm=\"20\"\r\n        :xs=\"24\"\r\n      >\r\n        <div class=\"card-container\">\r\n          <a-card\r\n            :bordered=\"false\"\r\n            title=\"Couldr 安装向导\"\r\n            style=\"box-shadow: 0px 10px 20px 0px rgba(236, 236, 236, 0.86);\"\r\n          >\r\n\r\n            <a-steps :current=\"stepCurrent\">\r\n              <a-step title=\"博主信息\">\r\n              </a-step>\r\n              <a-step title=\"博客信息\">\r\n              </a-step>\r\n              <a-step title=\"数据迁移\">\r\n              </a-step>\r\n            </a-steps>\r\n            <a-divider dashed />\r\n            <!-- Blogger info -->\r\n            <a-form\r\n              layout=\"horizontal\"\r\n              v-show=\"stepCurrent == 0\"\r\n              :form=\"bloggerForm\"\r\n            >\r\n              <a-form-item class=\"animated fadeInUp\">\r\n                <a-input\r\n                  v-model=\"installation.username\"\r\n                  placeholder=\"用户名\"\r\n                  v-decorator=\"[\r\n                    'username',\r\n                    {rules: [{ required: true, message: '请输入用户名' }]}\r\n                  ]\"\r\n                >\r\n                  <a-icon\r\n                    slot=\"prefix\"\r\n                    type=\"user\"\r\n                    style=\"color: rgba(0,0,0,.25)\"\r\n                  />\r\n                </a-input>\r\n              </a-form-item>\r\n              <a-form-item\r\n                class=\"animated fadeInUp\"\r\n                :style=\"{'animation-delay': '0.1s'}\"\r\n              >\r\n                <a-input\r\n                  v-model=\"installation.nickname\"\r\n                  placeholder=\"用户昵称\"\r\n                >\r\n                  <a-icon\r\n                    slot=\"prefix\"\r\n                    type=\"smile\"\r\n                    style=\"color: rgba(0,0,0,.25)\"\r\n                  />\r\n                </a-input>\r\n              </a-form-item>\r\n              <a-form-item\r\n                class=\"animated fadeInUp\"\r\n                :style=\"{'animation-delay': '0.2s'}\"\r\n              >\r\n                <a-input\r\n                  v-model=\"installation.email\"\r\n                  placeholder=\"用户邮箱\"\r\n                  v-decorator=\"[\r\n                    'email',\r\n                    {rules: [{ required: true, message: '请输入邮箱' }]}\r\n                  ]\"\r\n                >\r\n                  <a-icon\r\n                    slot=\"prefix\"\r\n                    type=\"mail\"\r\n                    style=\"color: rgba(0,0,0,.25)\"\r\n                  />\r\n                </a-input>\r\n              </a-form-item>\r\n              <a-form-item\r\n                class=\"animated fadeInUp\"\r\n                :style=\"{'animation-delay': '0.3s'}\"\r\n              >\r\n                <a-input\r\n                  v-model=\"installation.password\"\r\n                  type=\"password\"\r\n                  placeholder=\"用户密码（8-100位）\"\r\n                  v-decorator=\"[\r\n                    'password',\r\n                    {rules: [{ required: true, message: '请输入密码（8-100位）' }]}\r\n                  ]\"\r\n                >\r\n                  <a-icon\r\n                    slot=\"prefix\"\r\n                    type=\"lock\"\r\n                    style=\"color: rgba(0,0,0,.25)\"\r\n                  />\r\n                </a-input>\r\n              </a-form-item>\r\n              <a-form-item\r\n                class=\"animated fadeInUp\"\r\n                :style=\"{'animation-delay': '0.4s'}\"\r\n              >\r\n                <a-input\r\n                  v-model=\"installation.confirmPassword\"\r\n                  type=\"password\"\r\n                  placeholder=\"确定密码\"\r\n                  v-decorator=\"[\r\n                    'confirmPassword',\r\n                    {rules: [{ required: true, message: '请确定密码' }]}\r\n                  ]\"\r\n                >\r\n                  <a-icon\r\n                    slot=\"prefix\"\r\n                    type=\"lock\"\r\n                    style=\"color: rgba(0,0,0,.25)\"\r\n                  />\r\n                </a-input>\r\n              </a-form-item>\r\n            </a-form>\r\n\r\n            <!-- Blog info -->\r\n\r\n            <a-form\r\n              layout=\"horizontal\"\r\n              v-show=\"stepCurrent == 1\"\r\n            >\r\n              <a-form-item class=\"animated fadeInUp\">\r\n                <a-input\r\n                  v-model=\"installation.url\"\r\n                  placeholder=\"博客地址\"\r\n                >\r\n                  <a-icon\r\n                    slot=\"prefix\"\r\n                    type=\"link\"\r\n                    style=\"color: rgba(0,0,0,.25)\"\r\n                  />\r\n                </a-input>\r\n              </a-form-item>\r\n              <a-form-item\r\n                class=\"animated fadeInUp\"\r\n                :style=\"{'animation-delay': '0.2s'}\"\r\n              >\r\n                <a-input\r\n                  v-model=\"installation.title\"\r\n                  placeholder=\"博客标题\"\r\n                >\r\n                  <a-icon\r\n                    slot=\"prefix\"\r\n                    type=\"book\"\r\n                    style=\"color: rgba(0,0,0,.25)\"\r\n                  />\r\n                </a-input>\r\n              </a-form-item>\r\n            </a-form>\r\n\r\n            <!-- Data migration -->\r\n            <div v-show=\"stepCurrent == 2\">\r\n              <a-alert\r\n                style=\"margin-bottom: 1rem\"\r\n                message=\"如果有迁移需求，请点击并选择'迁移文件'\"\r\n                type=\"info\"\r\n                class=\"animated fadeInUp\"\r\n              />\r\n              <!-- <Upload\r\n                :name=\"migrationUploadName\"\r\n                accept=\"application/json\"\r\n                :uploadHandler=\"handleMigrationUpload\"\r\n                @remove=\"handleMigrationFileRemove\"\r\n                class=\"animated fadeIn\"\r\n                :style=\"{'animation-delay': '0.2s'}\"\r\n              >\r\n                <p class=\"ant-upload-drag-icon\">\r\n                  <a-icon type=\"inbox\" />\r\n                </p>\r\n                <p class=\"ant-upload-text\">点击选择文件或将文件拖拽到此处</p>\r\n                <p class=\"ant-upload-hint\">仅支持单个文件上传</p>\r\n              </Upload> -->\r\n            </div>\r\n\r\n            <a-row\r\n              class=\"install-action\"\r\n              type=\"flex\"\r\n              justify=\"space-between\"\r\n              style=\"margin-top: 1rem;\"\r\n            >\r\n              <div>\r\n                <a-button\r\n                  class=\"previus-button\"\r\n                  v-if=\"stepCurrent != 0\"\r\n                  @click=\"stepCurrent--\"\r\n                  style=\"margin-right: 1rem;\"\r\n                >上一步</a-button>\r\n                <a-button\r\n                  type=\"primary\"\r\n                  v-if=\"stepCurrent != 2\"\r\n                  @click=\"handleNextStep\"\r\n                >下一步</a-button>\r\n              </div>\r\n              <a-button\r\n                v-if=\"stepCurrent == 2\"\r\n                type=\"danger\"\r\n                icon=\"upload\"\r\n                @click=\"handleInstall\"\r\n              >安装</a-button>\r\n            </a-row>\r\n          </a-card>\r\n        </div>\r\n      </a-col>\r\n    </a-row>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport adminApi from '@/api/admin'\r\nimport recoveryApi from '@/api/recovery'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      installation: {},\r\n      migrationUploadName: 'file',\r\n      migrationData: null,\r\n      stepCurrent: 0,\r\n      bloggerForm: this.$form.createForm(this)\r\n    }\r\n  },\r\n  created() {\r\n    this.verifyIsInstall()\r\n    this.installation.url = window.location.protocol + '//' + window.location.host\r\n  },\r\n  methods: {\r\n    verifyIsInstall() {\r\n      adminApi.isInstalled().then(response => {\r\n        if (response.data.data) {\r\n          this.$router.push({ name: 'Login' })\r\n        }\r\n      })\r\n    },\r\n    handleNextStep(e) {\r\n      e.preventDefault()\r\n      this.bloggerForm.validateFields((error, values) => {\r\n        /* this.$log.debug('error', error)\r\n        this.$log.debug('Received values of form: ', values) */\r\n        if (error != null) {\r\n        } else {\r\n          this.stepCurrent++\r\n        }\r\n      })\r\n    },\r\n    handleMigrationUpload(data) {\r\n      this.$log.debug('Selected data', data)\r\n      this.migrationData = data\r\n      return new Promise((resolve, reject) => {\r\n        this.$log.debug('Handle uploading')\r\n        resolve()\r\n      })\r\n    },\r\n    handleMigrationFileRemove(file) {\r\n      this.$log.debug('Removed file', file)\r\n      this.$log.debug('Migration file from data', this.migrationData.get(this.migrationUploadName))\r\n      if (this.migrationData.get(this.migrationUploadName).uid === file.uid) {\r\n        this.migrationData = null\r\n        this.migrationFile = null\r\n      }\r\n    },\r\n    install() {\r\n      adminApi.install(this.installation).then(response => {\r\n        this.$log.debug('Installation response', response)\r\n        this.$message.success('安装成功！')\r\n        setTimeout(() => {\r\n          this.$router.push({ name: 'Login' })\r\n        }, 300)\r\n      })\r\n    },\r\n    handleInstall() {\r\n      const password = this.installation.password\r\n      const confirmPassword = this.installation.confirmPassword\r\n\r\n      this.$log.debug('Password', password)\r\n      this.$log.debug('Confirm password', confirmPassword)\r\n\r\n      if (password !== confirmPassword) {\r\n        this.$message.error('确认密码和密码不匹配')\r\n        return\r\n      }\r\n\r\n      // Handle migration\r\n      if (this.migrationData) {\r\n        recoveryApi.migrate(this.migrationData).then(response => {\r\n          this.$log.debug('Migrated successfullly')\r\n          this.$message.success('数据迁移成功！')\r\n          this.install()\r\n        })\r\n      } else {\r\n        this.install()\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n"],"sourceRoot":"src/views/system"}]}