{"remainingRequest":"F:\\个人git项目\\squirrel-admin\\node_modules\\babel-loader\\lib\\index.js!F:\\个人git项目\\squirrel-admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\个人git项目\\squirrel-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\个人git项目\\squirrel-admin\\src\\views\\file\\AttachmentPreview.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\个人git项目\\squirrel-admin\\src\\views\\file\\AttachmentPreview.vue","mtime":1586533088756},{"path":"F:\\个人git项目\\squirrel-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\个人git项目\\squirrel-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\个人git项目\\squirrel-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\个人git项目\\squirrel-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubGFzdC1pbmRleC1vZiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0IjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0ICd2dWUtZHBsYXllci9kaXN0L3Z1ZS1kcGxheWVyLmNzcyc7CmltcG9ydCBWdWVEUGxheWVyIGZyb20gJ3Z1ZS1kcGxheWVyJzsKaW1wb3J0ICd2aWV3ZXJqcy9kaXN0L3ZpZXdlci5jc3MnOwppbXBvcnQgVmlld2VyIGZyb20gJ3ZpZXdlcmpzJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdBdHRhY2htZW50UHJldmlldycsCiAgY29tcG9uZW50czogewogICAgJ2QtcGxheWVyJzogVnVlRFBsYXllcgogIH0sCiAgcHJvcHM6IHsKICAgIGF0dGFjaG1lbnQ6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfSwKICAgIHZpc2libGU6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICBkZWZhdWx0OiB0cnVlCiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcGhvdG86IHt9LAogICAgICBwcmV2aWV3TG9hZGluZzogdHJ1ZSwKICAgICAgcGhvdG9QcmV2aWV3VmlzaWJsZTogZmFsc2UsCiAgICAgIHZpZGVvUHJldmlld1Zpc2libGU6IGZhbHNlLAogICAgICBhdWRpb1ByZXZpZXdWaXNpYmxlOiBmYWxzZSwKICAgICAgbm9uc3VwcG9ydFByZXZpZXdWaXNpYmxlOiBmYWxzZSwKICAgICAgcGxheWVyOiB7fSwKICAgICAgYXVkaW9PcHRpb25zOiB7CiAgICAgICAgdXJsOiAnJwogICAgICB9LAogICAgICB2aWRlb09wdGlvbnM6IHsKICAgICAgICBsYW5nOiAnemgtY24nLAogICAgICAgIHZpZGVvOiB7CiAgICAgICAgICB1cmw6ICcnLAogICAgICAgICAgdHlwZTogJ2F1dG8nCiAgICAgICAgfQogICAgICB9CiAgICB9OwogIH0sCiAgd2F0Y2g6IHsKICAgIHZpc2libGU6IGZ1bmN0aW9uIHZpc2libGUobmV3VmFsdWUsIG9sZFZhbHVlKSB7CiAgICAgIC8qIHRoaXMuJGxvZy5kZWJ1Zygnb2xkIHZhbHVlJywgb2xkVmFsdWUpDQogICAgICB0aGlzLiRsb2cuZGVidWcoJ25ldyB2YWx1ZScsIG5ld1ZhbHVlKSAqLwogICAgICBpZiAobmV3VmFsdWUpIHsKICAgICAgICB0aGlzLmxvYWRTa2VsZXRvbigpOwogICAgICB9CiAgICB9LAogICAgYXR0YWNobWVudDogZnVuY3Rpb24gYXR0YWNobWVudChuZXdWYWx1ZSwgb2xkVmFsdWUpIHsKICAgICAgaWYgKG5ld1ZhbHVlKSB7CiAgICAgICAgdmFyIGF0dGFjaG1lbnQgPSBuZXdWYWx1ZTsKICAgICAgICB0aGlzLmhhbmRsZUp1ZGdlTWVkaWFUeXBlKGF0dGFjaG1lbnQpOwogICAgICB9CiAgICB9LAogICAgcGhvdG9QcmV2aWV3VmlzaWJsZTogZnVuY3Rpb24gcGhvdG9QcmV2aWV3VmlzaWJsZShuZXdWYWx1ZSwgb2xkVmFsdWUpIHsKICAgICAgdGhpcy5zaG93Vmlld2VyKHRoaXMsIHRoaXMucGhvdG9QcmV2aWV3VmlzaWJsZSk7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBzaG93Vmlld2VyOiBmdW5jdGlvbiBzaG93Vmlld2VyKHRoYXQsIHBob3RvUHJldmlld1Zpc2libGUpIHsKICAgICAgaWYgKHBob3RvUHJldmlld1Zpc2libGUpIHsKICAgICAgICB2YXIgaW1hZ2UgPSBuZXcgSW1hZ2UoKTsKICAgICAgICBpbWFnZS5zcmMgPSB0aGlzLmF0dGFjaG1lbnQucGF0aDsKICAgICAgICB2YXIgdmlld2VyID0gbmV3IFZpZXdlcihpbWFnZSwgewogICAgICAgICAgbmF2YmFyOiBmYWxzZSwKICAgICAgICAgIGhpZGRlbjogZnVuY3Rpb24gaGlkZGVuKCkgewogICAgICAgICAgICB2aWV3ZXIuZGVzdHJveSgpOwogICAgICAgICAgICB0aGF0LnBob3RvUHJldmlld1Zpc2libGUgPSAhcGhvdG9QcmV2aWV3VmlzaWJsZTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICB2aWV3ZXIuc2hvdygpOwogICAgICB9CiAgICB9LAogICAgbW92ZTogZnVuY3Rpb24gbW92ZShlKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAvLyDojrflj5bnm67moIflhYPntKAKICAgICAgdmFyIG9kaXYgPSBlLnRhcmdldC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQ7IC8vIOeul+WHuum8oOagh+ebuOWvueWFg+e0oOeahOS9jee9rgoKICAgICAgdmFyIGRpc1ggPSBlLmNsaWVudFggLSBvZGl2Lm9mZnNldExlZnQ7CiAgICAgIHZhciBkaXNZID0gZS5jbGllbnRZIC0gb2Rpdi5vZmZzZXRUb3A7IC8vIOm8oOagh+aMieS4i+W5tuenu+WKqOeahOS6i+S7tgoKICAgICAgZG9jdW1lbnQub25tb3VzZW1vdmUgPSBmdW5jdGlvbiAoZSkgewogICAgICAgIC8vIOeUqOm8oOagh+eahOS9jee9ruWHj+WOu+m8oOagh+ebuOWvueWFg+e0oOeahOS9jee9ru+8jOW+l+WIsOWFg+e0oOeahOS9jee9rgogICAgICAgIHZhciBsZWZ0ID0gZS5jbGllbnRYIC0gZGlzWDsKICAgICAgICB2YXIgdG9wID0gZS5jbGllbnRZIC0gZGlzWTsgLy8g57uR5a6a5YWD57Sg5L2N572u5YiwcG9zaXRpb25Y5ZKMcG9zaXRpb25Z5LiK6Z2iCgogICAgICAgIF90aGlzLnBvc2l0aW9uWCA9IHRvcDsKICAgICAgICBfdGhpcy5wb3NpdGlvblkgPSBsZWZ0OyAvLyDnp7vliqjlvZPliY3lhYPntKAKCiAgICAgICAgb2Rpdi5zdHlsZS5sZWZ0ID0gbGVmdCArICdweCc7CiAgICAgICAgb2Rpdi5zdHlsZS50b3AgPSB0b3AgKyAncHgnOwogICAgICB9OwoKICAgICAgZG9jdW1lbnQub25tb3VzZXVwID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICBkb2N1bWVudC5vbm1vdXNlbW92ZSA9IG51bGw7CiAgICAgICAgZG9jdW1lbnQub25tb3VzZXVwID0gbnVsbDsKICAgICAgfTsKICAgIH0sCiAgICBsb2FkU2tlbGV0b246IGZ1bmN0aW9uIGxvYWRTa2VsZXRvbigpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLnByZXZpZXdMb2FkaW5nID0gdHJ1ZTsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMyLnByZXZpZXdMb2FkaW5nID0gZmFsc2U7CiAgICAgIH0sIDUwMCk7CiAgICB9LAogICAgaGFuZGxlSnVkZ2VNZWRpYVR5cGU6IGZ1bmN0aW9uIGhhbmRsZUp1ZGdlTWVkaWFUeXBlKGF0dGFjaG1lbnQpIHsKICAgICAgdmFyIG1lZGlhVHlwZSA9IGF0dGFjaG1lbnQubWVkaWFUeXBlOyAvLyDliKTmlq3mlofku7bnsbvlnosKCiAgICAgIGlmIChtZWRpYVR5cGUpIHsKICAgICAgICB2YXIgcHJlZml4ID0gbWVkaWFUeXBlLnNwbGl0KCcvJylbMF07CgogICAgICAgIGlmIChwcmVmaXggPT09ICd2aWRlbycgfHwgcHJlZml4ID09PSAnZmx2JykgewogICAgICAgICAgLy8g5o6n5Yi25ZCE5Liq57uE5Lu255qE5pi+56S6CiAgICAgICAgICB0aGlzLmhhbmRsZVByZXZpZXdWaXNpYmxlKGZhbHNlLCB0cnVlLCBmYWxzZSwgZmFsc2UpOyAvLyDljrvpmaTop4bpopHlnLDlnYDlkI7pnaLnmoTlj4LmlbAKCiAgICAgICAgICB2YXIgbGFzdEluZGV4ID0gYXR0YWNobWVudC5wYXRoLmxhc3RJbmRleE9mKCc/Jyk7CiAgICAgICAgICB2YXIgcGF0aCA9IGF0dGFjaG1lbnQucGF0aC5zdWJzdHJpbmcoMCwgbGFzdEluZGV4ID09PSAtMSA/IGF0dGFjaG1lbnQucGF0aC5sZW5naHQgOiBsYXN0SW5kZXgpOyAvLyDorr7nva7op4bpopHlnLDlnYAKCiAgICAgICAgICB0aGlzLiRzZXQodGhpcy52aWRlb09wdGlvbnMudmlkZW8sICd1cmwnLCBwYXRoKTsKICAgICAgICAgIC8qIHRoaXMuJGxvZy5kZWJ1ZygndmlkZW8gdXJsJywgcGF0aCkgKi8KCiAgICAgICAgICBjb25zb2xlLmxvZygndmlkZW8gdXJsOicgKyBwYXRoKTsKICAgICAgICB9IGVsc2UgaWYgKHByZWZpeCA9PT0gJ2ltYWdlJykgewogICAgICAgICAgdGhpcy5oYW5kbGVQcmV2aWV3VmlzaWJsZSh0cnVlLCBmYWxzZSwgZmFsc2UsIGZhbHNlKTsKICAgICAgICB9IGVsc2UgaWYgKHByZWZpeCA9PT0gJ2F1ZGlvJykgewogICAgICAgICAgdGhpcy5oYW5kbGVQcmV2aWV3VmlzaWJsZShmYWxzZSwgZmFsc2UsIHRydWUsIGZhbHNlKTsKICAgICAgICAgIHRoaXMuJHNldCh0aGlzLmF1ZGlvT3B0aW9ucywgJ3VybCcsIGF0dGFjaG1lbnQucGF0aCk7CiAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmF1ZGlvT3B0aW9ucy51cmwpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmhhbmRsZVByZXZpZXdWaXNpYmxlKGZhbHNlLCBmYWxzZSwgZmFsc2UsIHRydWUpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGhhbmRsZVByZXZpZXdWaXNpYmxlOiBmdW5jdGlvbiBoYW5kbGVQcmV2aWV3VmlzaWJsZShwaG90bywgdmlkZW8sIGF1ZGlvLCBub25zdXBwb3J0KSB7CiAgICAgIC8vIOS4uuS6huabtOWlveeahOS9v3Z1ZeebkeWQrOWIsOe7hOS7tuWPmOWMluWPiuaXtuWIt+aWsCzmlrnlvI/kv67mlLnnu4Tku7blkI7pnIDopoHliLfmlrDmiY3og73mmL7npLrkuIDkuIvpg6jliIYKICAgICAgdGhpcy4kc2V0KHRoaXMsICdwaG90b1ByZXZpZXdWaXNpYmxlJywgcGhvdG8pOwogICAgICB0aGlzLiRzZXQodGhpcywgJ3ZpZGVvUHJldmlld1Zpc2libGUnLCB2aWRlbyk7CiAgICAgIHRoaXMuJHNldCh0aGlzLCAnYXVkaW9QcmV2aWV3VmlzaWJsZScsIGF1ZGlvKTsKICAgICAgdGhpcy4kc2V0KHRoaXMsICdub25zdXBwb3J0UHJldmlld1Zpc2libGUnLCBub25zdXBwb3J0KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["AttachmentPreview.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<div>\r\n\t\t<a-modal\r\n\t\tstyle=\"top: 20px;\"\r\n\t\t  v-model=\"videoPreviewVisible\"\r\n\t\t\t:footer=\"null\"\r\n\t\t\t:maskClosable=\"false\"\r\n\t\t\t:maskStyle=\"{'background-color':'rgba(0, 0, 0, 0)'}\"\r\n\t\t\twrapClassName=\"dplayer-modal\"\r\n\t\t\tdestroyOnClose\r\n\t\t\t:closable=\"false\"\r\n\t\t\tcentered\r\n\t\t>\r\n\t\t\t<div class=\"dplayer-header\" @mousedown=\"move\">\r\n\t\t\t\t<div class=\"dplayer-header-title\">视频播放</div>\r\n\t\t\t\t<div class=\"dplayer-close\" @click=\"videoPreviewVisible = false\">\r\n\t\t\t\t\t<a-icon type=\"close\" />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"dplayer-body\">\r\n\t\t\t\t<d-player\r\n\t\t\t\t  ref=\"player\"\r\n\t\t\t\t  :options=\"videoOptions\"\r\n\t\t\t\t  v-show=\"videoPreviewVisible\"\r\n\t\t\t\t  class=\"video-player-box\"\r\n\t\t\t\t  style=\"width: 100%;\"\r\n\t\t\t\t>\r\n\t\t\t\t</d-player>\r\n\t\t\t</div>\r\n\t\t</a-modal>\r\n\t\t<a-modal\r\n\t\tstyle=\"top: 20px;\"\r\n\t\t  v-model=\"audioPreviewVisible\"\r\n\t\t\t:footer=\"null\"\r\n\t\t\t:maskClosable=\"false\"\r\n\t\t\t:maskStyle=\"{'background-color':'rgba(0, 0, 0, 0)'}\"\r\n\t\t\twrapClassName=\"dplayer-modal\"\r\n\t\t\tdestroyOnClose\r\n\t\t\t:closable=\"false\"\r\n\t\t\tcentered\r\n\t\t>\r\n\t\t\t<div class=\"dplayer-header\" @mousedown=\"move\">\r\n\t\t\t\t<div class=\"dplayer-header-title\">音频播放</div>\r\n\t\t\t\t<div class=\"dplayer-close\" @click=\"audioPreviewVisible = false\">\r\n\t\t\t\t\t<a-icon type=\"close\" />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"dplayer-body\">\r\n\t\t\t\t<audio :src=\"audioOptions.url\" controls=\"controls\"></audio>\r\n\t\t\t</div>\r\n\t\t</a-modal>\r\n\t</div>\r\n</template>\n\n<script>\r\nimport 'vue-dplayer/dist/vue-dplayer.css'\r\nimport VueDPlayer from 'vue-dplayer'\r\nimport 'viewerjs/dist/viewer.css'\r\nimport Viewer from 'viewerjs'\r\n\r\n\r\nexport default {\r\n\tname: 'AttachmentPreview',\r\n\tcomponents: {\r\n\t\t'd-player': VueDPlayer\r\n\t},\r\n\tprops: {\r\n\t  attachment: {\r\n\t    type: Object,\r\n\t    required: true\r\n\t  },\r\n\t\tvisible: {\r\n\t\t  type: Boolean,\r\n\t\t  required: false,\r\n\t\t  default: true\r\n\t\t}\r\n\t},\r\n\tdata () {\r\n\t\treturn {\r\n\t\t\tphoto: {},\r\n\t\t\tpreviewLoading: true,\r\n\t\t\tphotoPreviewVisible: false,\r\n\t\t\tvideoPreviewVisible: false,\r\n\t\t\taudioPreviewVisible: false,\r\n\t\t\tnonsupportPreviewVisible: false,\r\n\t\t\tplayer: {},\r\n\t\t\taudioOptions: {\r\n\t\t\t\turl: ''\r\n\t\t\t},\r\n\t\t\tvideoOptions: {\r\n\t\t\t  lang: 'zh-cn',\r\n\t\t\t  video: {\r\n\t\t\t    url: '',\r\n\t\t\t    type: 'auto'\r\n\t\t\t  }\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\twatch: {\r\n\t\tvisible: function(newValue, oldValue) {\r\n\t\t  /* this.$log.debug('old value', oldValue)\r\n\t\t  this.$log.debug('new value', newValue) */\r\n\t\t  if (newValue) {\r\n\t\t    this.loadSkeleton()\r\n\t\t  }\r\n\t\t},\r\n\t  attachment: function(newValue, oldValue) {\r\n\t    if (newValue) {\r\n\t      var attachment = newValue\r\n\t      this.handleJudgeMediaType(attachment)\r\n\t    }\r\n\t  },\r\n\t\tphotoPreviewVisible: function(newValue, oldValue) {\r\n\t\t\tthis.showViewer(this, this.photoPreviewVisible)\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tshowViewer(that, photoPreviewVisible) {\r\n\t\t\tif (photoPreviewVisible) {\r\n\t\t\t\tvar image = new Image()\r\n\t\t\t\timage.src = this.attachment.path\r\n\t\t\t\tvar viewer = new Viewer(image, {\r\n\t\t\t\t\tnavbar: false,\r\n\t\t\t\t\thidden() {\r\n\t\t\t\t\t\tviewer.destroy()\r\n\t\t\t\t\t\tthat.photoPreviewVisible = !photoPreviewVisible\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tviewer.show()\r\n\t\t\t}\r\n\t\t},\r\n\t\tmove(e) {\r\n\t\t\t // 获取目标元素\r\n\t\t\tconst odiv = e.target.parentElement.parentElement\r\n\t\t\t// 算出鼠标相对元素的位置\r\n\t\t\tconst disX = e.clientX - odiv.offsetLeft\r\n\t\t\tconst disY = e.clientY - odiv.offsetTop\r\n\t\t\t// 鼠标按下并移动的事件\r\n\t\t\tdocument.onmousemove = (e) => {       \r\n\t\t\t\t\t// 用鼠标的位置减去鼠标相对元素的位置，得到元素的位置\r\n\t\t\t\t\tconst left = e.clientX - disX\r\n\t\t\t\t\tconst top = e.clientY - disY\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 绑定元素位置到positionX和positionY上面\r\n\t\t\t\t\tthis.positionX = top\r\n\t\t\t\t\tthis.positionY = left\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 移动当前元素\r\n\t\t\t\t\todiv.style.left = left + 'px'\r\n\t\t\t\t\todiv.style.top = top + 'px'\r\n\t\t\t}\r\n\t\t\tdocument.onmouseup = (e) => {\r\n\t\t\t\t\tdocument.onmousemove = null\r\n\t\t\t\t\tdocument.onmouseup = null\r\n\t\t\t}\r\n\t\t},\r\n\t\tloadSkeleton() {\r\n\t\t  this.previewLoading = true\r\n\t\t  setTimeout(() => {\r\n\t\t    this.previewLoading = false\r\n\t\t  }, 500)\r\n\t\t},\r\n\t\thandleJudgeMediaType(attachment) {\r\n\t\t  var mediaType = attachment.mediaType\r\n\t\t  // 判断文件类型\r\n\t\t  if (mediaType) {\r\n\t\t    var prefix = mediaType.split('/')[0]\r\n\t\t    if (prefix === 'video' || prefix === 'flv') {\r\n\t\t      // 控制各个组件的显示\r\n\t\t      this.handlePreviewVisible(false, true, false, false)\r\n\t\t\r\n\t\t      // 去除视频地址后面的参数\r\n\t\t      var lastIndex = attachment.path.lastIndexOf('?')\r\n\t\t      var path = attachment.path.substring(0, lastIndex === -1 ? attachment.path.lenght : lastIndex)\r\n\t\t      // 设置视频地址\r\n\t\t      this.$set(this.videoOptions.video, 'url', path)\r\n\t\t      /* this.$log.debug('video url', path) */\r\n\t\t\t\t\tconsole.log('video url:' + path)\r\n\t\t    } else if (prefix === 'image') {\r\n\t\t      this.handlePreviewVisible(true, false, false, false)\r\n\t\t    } else if (prefix === 'audio') {\r\n\t\t      this.handlePreviewVisible(false, false, true, false)\r\n\t\t\t\t\tthis.$set(this.audioOptions, 'url', attachment.path)\r\n\t\t\t\t\tconsole.log(this.audioOptions.url)\r\n\t\t    } else {\r\n\t\t      this.handlePreviewVisible(false, false, false, true)\r\n\t\t    }\r\n\t\t  }\r\n\t\t},\r\n\t\thandlePreviewVisible(photo, video, audio, nonsupport) {\r\n\t\t  // 为了更好的使vue监听到组件变化及时刷新,方式修改组件后需要刷新才能显示一下部分\r\n\t\t  this.$set(this, 'photoPreviewVisible', photo)\r\n\t\t  this.$set(this, 'videoPreviewVisible', video)\r\n\t\t\tthis.$set(this, 'audioPreviewVisible', audio)\r\n\t\t  this.$set(this, 'nonsupportPreviewVisible', nonsupport)\r\n\t\t}\r\n\t}\r\n}\n</script>\n\n<style>\r\n\t\r\n\t.draggable-wrap {\r\n\t\t/* position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0; */\r\n\t}\t\r\n\t\r\n\t.dplayer-header {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: space-between;\r\n\t\theight: 30px;\r\n\t\tcolor: #808695;\r\n    background-color: #1e1e1e;\r\n\t}\r\n\t\r\n\t.dplayer-header .dplayer-header-title {\r\n\t\tfont-size: 13px;\r\n\t\tpadding-left: 12px;\r\n\t}\r\n\t\r\n\t.dplayer-header .dplayer-close {\r\n\t\tdisplay: inherit;\r\n\t  width: 45px;\r\n\t  height: 100%;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t}\r\n\t\r\n\t.dplayer-header .dplayer-close:hover {\r\n\t\tcolor: #fff;\r\n    background-color: red;\r\n\t}\r\n\t\r\n\t.dplayer-modal .ant-modal-body {\r\n\t\tpadding: 0;\r\n\t\tborder-radius: 3px;\r\n\t}\r\n\t\t\r\n\t\n</style>\n"],"sourceRoot":"src/views/file"}]}