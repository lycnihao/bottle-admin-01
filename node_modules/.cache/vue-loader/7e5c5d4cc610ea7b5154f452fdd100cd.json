{"remainingRequest":"F:\\个人git项目\\squirrel-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\个人git项目\\squirrel-admin\\src\\views\\file\\FileList.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\个人git项目\\squirrel-admin\\src\\views\\file\\FileList.vue","mtime":1586438174586},{"path":"F:\\个人git项目\\squirrel-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\个人git项目\\squirrel-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\个人git项目\\squirrel-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\个人git项目\\squirrel-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBtaXhpbiwgbWl4aW5EZXZpY2UgfSBmcm9tICdAL3V0aWxzL21peGluLmpzJw0KaW1wb3J0IEZpbGVQb25kVXBsb2FkIGZyb20gJ0AvY29tcG9uZW50cy9VcGxvYWQvRmlsZVBvbmRVcGxvYWQnDQppbXBvcnQgYXR0YWNobWVudEFwaSBmcm9tICdAL2FwaS9hdHRhY2htZW50Jw0KaW1wb3J0IGZvbGRlciBmcm9tICdAL2FwaS9mb2xkZXInDQppbXBvcnQgQXR0YWNobWVudFByZXZpZXcgZnJvbSAnQC92aWV3cy9maWxlL0F0dGFjaG1lbnRQcmV2aWV3Jw0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAnVGFibGVMaXN0JywNCgljb21wb25lbnRzOiB7DQoJCUZpbGVQb25kVXBsb2FkOglGaWxlUG9uZFVwbG9hZCwNCgkJQXR0YWNobWVudFByZXZpZXc6IEF0dGFjaG1lbnRQcmV2aWV3DQoJfSwNCgltaXhpbnM6IFttaXhpbiwgbWl4aW5EZXZpY2VdLA0KCW1vdW50ZWQgKCkJew0KCQl0aGlzLmdldERhdGFTb3VyY2UoKQ0KCQl0aGlzLmRpcmVjdG9yeUhpc3RvcnkucHVzaCh0aGlzLnF1ZXJ5UGFyYW0ucGF0aCkNCgl9LA0KICBkYXRhICgpIHsNCiAgICByZXR1cm4gew0KCQkJZGlyZWN0b3J5SGlzdG9yeTogW10sDQoJCQlkaXJlY3RvcnlDdXJzb3I6IDAsDQoJCQlwYXRoczogW10sDQoJCQlwYXJlbnRQYXRoOiAnJywNCiAgICAgIHF1ZXJ5UGFyYW06IHsNCgkJCQlwYXRoOiAncm9vdCcNCgkJCX0sDQoJCQlsb2NhbERhdGFTb3VyY2U6IFtdLA0KCQkJc2VsZWN0ZWRSb3dLZXlzOiBbXSwNCgkJCWxvYWRpbmc6IHRydWUsDQoJCQlzZWxlY3RBdHRhY2htZW50OiB7fSwNCgkJCWNhY2hlUmVjb3JkOiB1bmRlZmluZWQsDQoJCQlyZW5hbWVWaXNpYmxlOiBmYWxzZSwNCgkJCXJlbmFtZUxvYWRpbmc6IGZhbHNlLA0KCQkJdXBsb2FkVmlzaWJsZTogZmFsc2UsDQoJCQl1cGxvYWRIYW5kbGVyOiBhdHRhY2htZW50QXBpLnVwbG9hZCwNCgkJCWZpbGVJY29uOiBzdHJpbmdUeXBlID0+IHsNCgkJCQlpZiAoc3RyaW5nVHlwZSAhPT0gdW5kZWZpbmVkICYmIHN0cmluZ1R5cGUgIT09IG51bGwpIHsNCgkJCQkJdmFyIG1lZGlhVHlwZSA9IHN0cmluZ1R5cGUuc3BsaXQoJy8nKVswXQ0KCQkJCQljb25zb2xlLmxvZyhtZWRpYVR5cGUpDQoJCQkJCWlmIChtZWRpYVR5cGUgPT09ICdpbWFnZScpIHsNCgkJCQkJCXJldHVybiAncGljdHVyZScNCgkJCQkJfQ0KCQkJCQlpZiAobWVkaWFUeXBlID09PSAndmlkZW8nKSB7DQoJCQkJCQlyZXR1cm4gJ3BsYXktc3F1YXJlJw0KCQkJCQl9DQoJCQkJfQ0KCQkJCXJldHVybiAnZm9sZGVyJw0KCQkJfQ0KICAgIH0NCiAgfSwNCiAgbWV0aG9kczogew0KCQl0b1BhcmVudFBhdGgoKSB7DQoJCQl0aGlzLmdldERhdGFTb3VyY2UodGhpcy5wYXJlbnRQYXRoKQ0KCQkJdGhpcy5kaXJlY3RvcnlIaXN0b3J5LnNwbGljZSh0aGlzLmRpcmVjdG9yeUN1cnNvciArIDEsIHRoaXMuZGlyZWN0b3J5SGlzdG9yeS5sZW5ndGggLSB0aGlzLmRpcmVjdG9yeUN1cnNvciwgdGhpcy5wYXJlbnRQYXRoKQ0KCQkJdGhpcy5kaXJlY3RvcnlDdXJzb3IgPSB0aGlzLmRpcmVjdG9yeUhpc3RvcnkubGVuZ3RoIC0gMQ0KCQl9LA0KCQluZXh0T3JQcmV2aW91cyhwcmV2aW91cywgbmV4dCkgew0KCQkJLyogY29uc29sZS5sb2codGhpcy5kaXJlY3RvcnlDdXJzb3IpDQoJCQljb25zb2xlLmxvZyh0aGlzLmRpcmVjdG9yeUhpc3RvcnkpICovDQoJCQlpZiAocHJldmlvdXMgJiYgdGhpcy5kaXJlY3RvcnlIaXN0b3J5Lmxlbmd0aCA+PSB0aGlzLmRpcmVjdG9yeUN1cnNvciAtIDEgJiYgdGhpcy5kaXJlY3RvcnlDdXJzb3IgPiAwKSB7IA0KCQkJCXRoaXMuZ2V0RGF0YVNvdXJjZSh0aGlzLmRpcmVjdG9yeUhpc3RvcnlbdGhpcy5kaXJlY3RvcnlDdXJzb3IgLSAxXSkNCgkJCQl0aGlzLmRpcmVjdG9yeUN1cnNvci0tDQoJCQl9DQoJCQlpZiAobmV4dCAmJiB0aGlzLmRpcmVjdG9yeUN1cnNvciArIDEgPCB0aGlzLmRpcmVjdG9yeUhpc3RvcnkubGVuZ3RoKSB7DQoJCQkJdGhpcy5nZXREYXRhU291cmNlKHRoaXMuZGlyZWN0b3J5SGlzdG9yeVt0aGlzLmRpcmVjdG9yeUN1cnNvciArIDFdKQ0KCQkJCXRoaXMuZGlyZWN0b3J5Q3Vyc29yKysNCgkJCX0NCgkJfSwNCgkJZ2V0RGF0YVNvdXJjZShwYXRoKSB7DQoJCQl0aGlzLmxvYWRpbmcgPSB0cnVlDQoJCQlpZiAocGF0aCAhPT0gdW5kZWZpbmVkKSB7DQoJCQkJdGhpcy5xdWVyeVBhcmFtLnBhdGggPSBwYXRoDQoJCQl9DQoJCQlmb2xkZXIucXVlcnkoT2JqZWN0LmFzc2lnbih0aGlzLnF1ZXJ5UGFyYW0pKS50aGVuKHJlcyA9PiB7DQoJCQkJdGhpcy5sb2NhbERhdGFTb3VyY2UgPSByZXMuZGF0YS5mb2xkZXJTdWINCgkJCQl0aGlzLnBhdGhzID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5xdWVyeVBhcmFtKS5wYXRoLnNwbGl0KCcvJykNCgkJCQljb25zb2xlLmxvZyh0aGlzLnBhdGhzKQ0KCQkJCXRoaXMucGFyZW50UGF0aCA9IHJlcy5kYXRhLnBhcmVudA0KCQkJCXRoaXMubG9hZGluZyA9IGZhbHNlDQoJCQl9KS5jYXRjaChlID0+IHsNCgkJCQl0aGlzLmxvYWRpbmcgPSBmYWxzZQ0KCQkJCXRoaXMuJG5vdGlmaWNhdGlvbi5lcnJvcih7DQoJCQkJCW1lc3NhZ2U6ICfplJnor6/mj5DnpLonLA0KCQkJCQlkZXNjcmlwdGlvbjogJ+W9k+WJjeebruW9leS4jeWtmOWcqOaIluW3suWIoOmZpCcNCgkJCQl9KQ0KCQkJfSkNCgkJfSwNCgkJcm93Q2xpY2sgKHJlY29yZCwgaW5kZXgpIHsNCgkJCXJlY29yZC5hY3RpdmUgPSB0cnVlDQoJCX0sDQoJCXJvd0RibGNsaWNrIChyZWNvcmQpIHsNCgkJCWlmIChyZWNvcmQuaXNGb2xkZXIgIT09IHVuZGVmaW5lZCAmIHJlY29yZC5pc0ZvbGRlcikgew0KCQkJCXRoaXMuZ2V0RGF0YVNvdXJjZShyZWNvcmQucGF0aCkNCgkJCQl0aGlzLmRpcmVjdG9yeUhpc3Rvcnkuc3BsaWNlKHRoaXMuZGlyZWN0b3J5Q3Vyc29yICsgMSwgdGhpcy5kaXJlY3RvcnlIaXN0b3J5Lmxlbmd0aCAtIHRoaXMuZGlyZWN0b3J5Q3Vyc29yLCB0aGlzLnF1ZXJ5UGFyYW0ucGF0aCkNCgkJCQl0aGlzLmRpcmVjdG9yeUN1cnNvciA9IHRoaXMuZGlyZWN0b3J5SGlzdG9yeS5sZW5ndGggLSAxDQoJCQl9IGVsc2Ugew0KCQkJCXRoaXMuc2VsZWN0QXR0YWNobWVudCA9IE9iamVjdC5hc3NpZ24oe30sIHJlY29yZCkNCgkJCX0NCgkJfSwNCgkJY29udGV4dG1lbnUgKHJlY29yZCwgZXZlbnQpIHsNCgkJCXRoaXMuY2FjaGVSZWNvcmQgPSBPYmplY3QuYXNzaWduKHt9LCByZWNvcmQpDQoJCQl0aGlzLiRyZWZzLmNvbnRleHRtZW51LnNob3coewl0b3A6IGV2ZW50LmNsaWVudFksCWxlZnQ6IGV2ZW50LmNsaWVudFgJfSkNCgkJCXdpbmRvdy5ldmVudC5yZXR1cm5WYWx1ZQk9CWZhbHNlDQoJCQlyZXR1cm4gZmFsc2UNCgkJfSwNCgkJaGFuZGxlUmVuYW1lKCkgew0KCQkJdGhpcy5yZW5hbWVMb2FkaW5nID0gdHJ1ZQ0KCQkJdmFyIHJlY29yZCA9IHRoaXMuY2FjaGVSZWNvcmQNCgkJCWZvbGRlci5yZW5hbWUoeyAnbmFtZSc6IHJlY29yZC5uYW1lLCAna2V5JzogcmVjb3JkLmtleSwgJ3BhdGgnOiB0aGlzLnF1ZXJ5UGFyYW0ucGF0aCwgJ2lzRm9sZGVyJzogcmVjb3JkLmlzRm9sZGVyIH0pLnRoZW4ocmVzID0+IHsNCgkJCQl0aGlzLmdldERhdGFTb3VyY2UoKQ0KCQkJCXRoaXMucmVuYW1lTG9hZGluZyA9IHRoaXMucmVuYW1lVmlzaWJsZSA9IGZhbHNlDQoJCQl9KQ0KCQl9LA0KCQloYW5kbGVEZWxldGUoKSB7DQoJCQl2YXIgcmVjb3JkID0gdGhpcy5jYWNoZVJlY29yZA0KCQkJZm9sZGVyLmRlbGV0ZWQoeyAna2V5JzogcmVjb3JkLmtleSwgJ2lzRm9sZGVyJzogcmVjb3JkLmlzRm9sZGVyIH0pLnRoZW4ocmVzID0+IHsNCgkJCQl0aGlzLmdldERhdGFTb3VyY2UoKQ0KCQkJfSkuY2F0Y2goZSA9PiB7DQoJCQkJdGhpcy4kbm90aWZpY2F0aW9uLmVycm9yKHsNCgkJCQkJbWVzc2FnZTogJ+mUmeivr+aPkOekuicsDQoJCQkJCWRlc2NyaXB0aW9uOiAn5b2T5YmN55uu5b2V5LiL5a2Y5Zyo5paH5Lu25oiW5paH5Lu25aS5Jw0KCQkJCX0pDQoJCQl9KQ0KCQl9LA0KCQkvLyDpnaLljIXlsZHlr7zoiKog54K55Ye75LqL5Lu2DQoJCWhhbmRsZUJyZWFkY3J1bWIoaSkgew0KCQkJdGhpcy5nZXREYXRhU291cmNlKHRoaXMucGF0aHMuc2xpY2UoMCwgaSArIDEpLmpvaW4oJy8nKSkNCgkJfSwNCgkJb25VcGxvYWRDbG9zZSgpIHsNCgkJCXRoaXMuJHJlZnMudXBsb2FkLmhhbmRsZUNsZWFyRmlsZUxpc3QoKQ0KCQl9DQogIH0sDQoJd2F0Y2g6IHsNCgkJdXBsb2FkVmlzaWJsZTogZnVuY3Rpb24obmV3VmFsdWUsIG9sZFZhbHVlKSB7DQoJCSAgdGhpcy5nZXREYXRhU291cmNlKCkNCgkJfQ0KCX0NCn0NCg=="},{"version":3,"sources":["FileList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"FileList.vue","sourceRoot":"src/views/file","sourcesContent":["<template>\r\n  <a-card :bordered=\"false\">\r\n\t\t\r\n    <div class=\"table-page-search-wrapper operator\">\r\n\t\t\t<div class=\"file-path-tools\">\r\n\t\t\t\t<a-button shape=\"circle\" icon=\"arrow-left\" :class=\"{disable:directoryCursor == 0}\" @click=\"nextOrPrevious(true,false)\"/>\r\n\t\t\t\t<a-button shape=\"circle\" icon=\"arrow-up\" :class=\"{disable:parentPath == null}\" @click=\"toParentPath\"/>\r\n\t\t\t\t<a-button shape=\"circle\" icon=\"arrow-right\" :class=\"{disable:directoryCursor + 1 >= directoryHistory.length}\" @click=\"nextOrPrevious(false,true)\" />\r\n\t\t\t\t<a-button shape=\"circle\" icon=\"redo\" @click=\"getDataSource(directoryHistory[directoryCursor])\" :loading=\"loading\"/>\r\n\t\t\t</div>\r\n      <a-breadcrumb class=\"file-path\">\r\n\t\t\t\t<a-breadcrumb-item><a href=\"\" @click.self.prevent=\"getDataSource('root')\">主目录</a></a-breadcrumb-item>\r\n\t\t\t\t<a-breadcrumb-item v-for=\"(path, index) of paths\" v-bind:key=\"index\" v-show=\"index > 0\"><a href=\"\" @click.self.prevent=\"handleBreadcrumb(index)\">{{ path }}</a></a-breadcrumb-item>\r\n\t\t\t</a-breadcrumb>\r\n    </div>\r\n\t\t\r\n\t\t<div class=\"table-operator operator file-operator\">\r\n\t\t  <a-button icon=\"upload\" @click=\"uploadVisible = true\">上传</a-button>\r\n\t\t\t<a-button icon=\"folder-add\" @click=\"renameVisible = true, cacheRecord = {}\">文件夹</a-button>\r\n\t\t  <a-dropdown>\r\n\t\t    <a-menu slot=\"overlay\">\r\n\t\t      <a-menu-item key=\"1\"><a-icon type=\"delete\" />删除</a-menu-item>\r\n\t\t      <!-- lock | unlock -->\r\n\t\t      <a-menu-item key=\"2\"><a-icon type=\"lock\" />锁定</a-menu-item>\r\n\t\t    </a-menu>\r\n\t\t    <a-button style=\"margin-left: 8px\">\r\n\t\t      更多 <a-icon type=\"down\" />\r\n\t\t    </a-button>\r\n\t\t  </a-dropdown>\r\n\t\t</div>\r\n\t\t\r\n\t\t<a-spin :spinning=\"loading\">\r\n\t\t\t<a-icon slot=\"indicator\" type=\"loading\" style=\"font-size: 24px\" spin />\r\n\t\t\t<table class=\"directory\" ref=\"directory\">\r\n\t\t\t\t<thead>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<th class=\"directory-cell directory-head-cell\">名称</th>\r\n\t\t\t\t\t\t<th class=\"directory-cell directory-head-cell\">大小</th>\r\n\t\t\t\t\t\t<th class=\"directory-cell directory-head-cell\">日期</th>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</thead>\r\n\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t<tr \r\n\t\t\t\t\t\t\tv-for=\"(data, index) in localDataSource\"\r\n\t\t\t\t\t\t\t@click=\"rowClick(data,index)\"\r\n\t\t\t\t\t\t\t@dblclick=\"rowDblclick(data)\" \r\n\t\t\t\t\t\t\t@contextmenu=\"contextmenu(data,$event)\" \r\n\t\t\t\t\t\t\tv-bind:key=\"data.key\" \r\n\t\t\t\t\t\t\tv-bind:class=\"{ 'active' : data.active }\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<td class=\"directory-cell\"><span class=\"file-icon\"><a-icon :type=\"fileIcon(data.mediaType)\" /></span><span class=\"file-name\">{{ data.name }}</span></td>\r\n\t\t\t\t\t\t\t<td class=\"directory-cell\">{{ data.size | fileSizeFormat }}</td>\r\n\t\t\t\t\t\t\t<td class=\"directory-cell\">{{ data.createTime | moment }}</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t</tbody>\r\n\t\t\t</table>\r\n\t\t</a-spin>\r\n\t\t\r\n\t\t<a-modal\r\n\t\t  title=\"上传附件\"\r\n\t\t  v-model=\"uploadVisible\"\r\n\t\t  :footer=\"null\"\r\n\t\t  :afterClose=\"onUploadClose\"\r\n\t\t  destroyOnClose\r\n\t\t>\r\n\t\t  <FilePondUpload\r\n\t\t    ref=\"upload\"\r\n\t\t\t\t:path=\"paths.join('/')\"\r\n\t\t    :uploadHandler=\"uploadHandler\"\r\n\t\t  ></FilePondUpload>\r\n\t\t</a-modal>\r\n\t\t\r\n\t\t<a-modal\r\n      title=\"重命名文件夹\"\r\n      :visible=\"renameVisible\"\r\n      @ok=\"handleRename\"\r\n      :confirmLoading=\"renameLoading\"\r\n      @cancel=\"renameVisible = false\"\r\n    >\r\n      <a-input size=\"large\" placeholder=\"文件名称\" v-if=\"renameVisible\" v-model=\"cacheRecord.name\" />\r\n    </a-modal>\r\n\t\t\r\n\t\t<AttachmentPreview \r\n\t\t\tref=\"attachmentPreview\"\r\n\t\t\tv-if=\"selectAttachment\"\r\n\t\t\t:attachment=\"selectAttachment\"\r\n\t\t\t>\r\n\t\t</AttachmentPreview>\r\n\t\t\r\n\t\t<v-contextmenu ref=\"contextmenu\">\r\n\t\t\t<v-contextmenu-item @click=\"renameVisible = true, cacheRecord = {}\">新建文件夹</v-contextmenu-item>\r\n\t\t\t<v-contextmenu-item @click=\"renameVisible = true\">重命名</v-contextmenu-item>\r\n\t\t\t<v-contextmenu-item @click=\"handleDelete\">删除</v-contextmenu-item>\r\n\t\t</v-contextmenu>\r\n\t\t</a-card>\r\n\t</template>\r\n\r\n<script>\r\nimport { mixin, mixinDevice } from '@/utils/mixin.js'\r\nimport FilePondUpload from '@/components/Upload/FilePondUpload'\r\nimport attachmentApi from '@/api/attachment'\r\nimport folder from '@/api/folder'\r\nimport AttachmentPreview from '@/views/file/AttachmentPreview'\r\nexport default {\r\n  name: 'TableList',\r\n\tcomponents: {\r\n\t\tFilePondUpload:\tFilePondUpload,\r\n\t\tAttachmentPreview: AttachmentPreview\r\n\t},\r\n\tmixins: [mixin, mixinDevice],\r\n\tmounted ()\t{\r\n\t\tthis.getDataSource()\r\n\t\tthis.directoryHistory.push(this.queryParam.path)\r\n\t},\r\n  data () {\r\n    return {\r\n\t\t\tdirectoryHistory: [],\r\n\t\t\tdirectoryCursor: 0,\r\n\t\t\tpaths: [],\r\n\t\t\tparentPath: '',\r\n      queryParam: {\r\n\t\t\t\tpath: 'root'\r\n\t\t\t},\r\n\t\t\tlocalDataSource: [],\r\n\t\t\tselectedRowKeys: [],\r\n\t\t\tloading: true,\r\n\t\t\tselectAttachment: {},\r\n\t\t\tcacheRecord: undefined,\r\n\t\t\trenameVisible: false,\r\n\t\t\trenameLoading: false,\r\n\t\t\tuploadVisible: false,\r\n\t\t\tuploadHandler: attachmentApi.upload,\r\n\t\t\tfileIcon: stringType => {\r\n\t\t\t\tif (stringType !== undefined && stringType !== null) {\r\n\t\t\t\t\tvar mediaType = stringType.split('/')[0]\r\n\t\t\t\t\tconsole.log(mediaType)\r\n\t\t\t\t\tif (mediaType === 'image') {\r\n\t\t\t\t\t\treturn 'picture'\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (mediaType === 'video') {\r\n\t\t\t\t\t\treturn 'play-square'\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn 'folder'\r\n\t\t\t}\r\n    }\r\n  },\r\n  methods: {\r\n\t\ttoParentPath() {\r\n\t\t\tthis.getDataSource(this.parentPath)\r\n\t\t\tthis.directoryHistory.splice(this.directoryCursor + 1, this.directoryHistory.length - this.directoryCursor, this.parentPath)\r\n\t\t\tthis.directoryCursor = this.directoryHistory.length - 1\r\n\t\t},\r\n\t\tnextOrPrevious(previous, next) {\r\n\t\t\t/* console.log(this.directoryCursor)\r\n\t\t\tconsole.log(this.directoryHistory) */\r\n\t\t\tif (previous && this.directoryHistory.length >= this.directoryCursor - 1 && this.directoryCursor > 0) { \r\n\t\t\t\tthis.getDataSource(this.directoryHistory[this.directoryCursor - 1])\r\n\t\t\t\tthis.directoryCursor--\r\n\t\t\t}\r\n\t\t\tif (next && this.directoryCursor + 1 < this.directoryHistory.length) {\r\n\t\t\t\tthis.getDataSource(this.directoryHistory[this.directoryCursor + 1])\r\n\t\t\t\tthis.directoryCursor++\r\n\t\t\t}\r\n\t\t},\r\n\t\tgetDataSource(path) {\r\n\t\t\tthis.loading = true\r\n\t\t\tif (path !== undefined) {\r\n\t\t\t\tthis.queryParam.path = path\r\n\t\t\t}\r\n\t\t\tfolder.query(Object.assign(this.queryParam)).then(res => {\r\n\t\t\t\tthis.localDataSource = res.data.folderSub\r\n\t\t\t\tthis.paths = Object.assign({}, this.queryParam).path.split('/')\r\n\t\t\t\tconsole.log(this.paths)\r\n\t\t\t\tthis.parentPath = res.data.parent\r\n\t\t\t\tthis.loading = false\r\n\t\t\t}).catch(e => {\r\n\t\t\t\tthis.loading = false\r\n\t\t\t\tthis.$notification.error({\r\n\t\t\t\t\tmessage: '错误提示',\r\n\t\t\t\t\tdescription: '当前目录不存在或已删除'\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t},\r\n\t\trowClick (record, index) {\r\n\t\t\trecord.active = true\r\n\t\t},\r\n\t\trowDblclick (record) {\r\n\t\t\tif (record.isFolder !== undefined & record.isFolder) {\r\n\t\t\t\tthis.getDataSource(record.path)\r\n\t\t\t\tthis.directoryHistory.splice(this.directoryCursor + 1, this.directoryHistory.length - this.directoryCursor, this.queryParam.path)\r\n\t\t\t\tthis.directoryCursor = this.directoryHistory.length - 1\r\n\t\t\t} else {\r\n\t\t\t\tthis.selectAttachment = Object.assign({}, record)\r\n\t\t\t}\r\n\t\t},\r\n\t\tcontextmenu (record, event) {\r\n\t\t\tthis.cacheRecord = Object.assign({}, record)\r\n\t\t\tthis.$refs.contextmenu.show({\ttop: event.clientY,\tleft: event.clientX\t})\r\n\t\t\twindow.event.returnValue\t=\tfalse\r\n\t\t\treturn false\r\n\t\t},\r\n\t\thandleRename() {\r\n\t\t\tthis.renameLoading = true\r\n\t\t\tvar record = this.cacheRecord\r\n\t\t\tfolder.rename({ 'name': record.name, 'key': record.key, 'path': this.queryParam.path, 'isFolder': record.isFolder }).then(res => {\r\n\t\t\t\tthis.getDataSource()\r\n\t\t\t\tthis.renameLoading = this.renameVisible = false\r\n\t\t\t})\r\n\t\t},\r\n\t\thandleDelete() {\r\n\t\t\tvar record = this.cacheRecord\r\n\t\t\tfolder.deleted({ 'key': record.key, 'isFolder': record.isFolder }).then(res => {\r\n\t\t\t\tthis.getDataSource()\r\n\t\t\t}).catch(e => {\r\n\t\t\t\tthis.$notification.error({\r\n\t\t\t\t\tmessage: '错误提示',\r\n\t\t\t\t\tdescription: '当前目录下存在文件或文件夹'\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t},\r\n\t\t// 面包屑导航 点击事件\r\n\t\thandleBreadcrumb(i) {\r\n\t\t\tthis.getDataSource(this.paths.slice(0, i + 1).join('/'))\r\n\t\t},\r\n\t\tonUploadClose() {\r\n\t\t\tthis.$refs.upload.handleClearFileList()\r\n\t\t}\r\n  },\r\n\twatch: {\r\n\t\tuploadVisible: function(newValue, oldValue) {\r\n\t\t  this.getDataSource()\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n\t.directory {\r\n\t\twidth: 100%;\r\n    display: table;\r\n    border-spacing: 0;\r\n    border-collapse: collapse;\r\n\t}\r\n\t\r\n\t.directory-cell {\r\n\t\tdisplay: table-cell;\r\n    padding: 16px;\r\n    font-size: 0.875rem;\r\n    text-align: left;\r\n    font-weight: 400;\r\n    line-height: 1.43;\r\n    border-bottom: 1px solid rgba(224, 224, 224, 1);\r\n    letter-spacing: 0.01071em;\r\n    vertical-align: inherit;\r\n\t}\r\n\t\r\n\t.directory-head-cell {\r\n\t\tcolor: rgba(0, 0, 0, 0.87);\r\n    font-weight: 500;\r\n    line-height: 1.5rem;\r\n\t}\r\n\t\r\n\t.directory tbody tr.active {\r\n\t\tbackground-color: #f5f7fa;\r\n\t}\r\n\t\r\n\t.directory tbody tr:hover {\r\n\t\tbackground-color: #f5f7fa;\r\n\t}\r\n\t\r\n\t\r\n\t\r\n\t.editable-row-operations a {\r\n    margin-right: 8px;\r\n  }\r\n  .search {\r\n    margin-bottom: 54px;\r\n  }\r\n\r\n  .fold {\r\n    width: calc(100% - 216px);\r\n    display: inline-block\r\n  }\r\n\r\n  .operator {\r\n    margin-bottom: 18px;\r\n  }\r\n\t\r\n\t.file-operator > .ant-btn{\r\n\t\tmargin-right: 8px;\r\n\t}\r\n\t\r\n\t.file-path-tools {\r\n\t\tposition: absolute;\r\n\t}\r\n\t\r\n\t.file-path-tools button{\r\n\t\tfont-size: 14px;\r\n\t\tborder: 1px solid transparent;\r\n\t}\r\n\t\r\n\t.file-path-tools button:hover {\r\n\t  background-color: #f8f8f8;\r\n\t}\r\n\t\r\n\t.file-path-tools .disable {\r\n\t\tcolor: #ccc;\r\n\t}\r\n\t\r\n\t.file-path-tools .disable::after {\r\n\t\topacity: 0;\r\n\t}\r\n\t\r\n\t.file-path-tools .disable:hover {\r\n\t\tbackground-color: #fff;\r\n\t}\r\n\t\r\n\t.file-path {\r\n\t\tmargin-left: 150px;\r\n\t\tbackground-color: #f1f3f4;\r\n\t\tborder-radius: 14px;\r\n\t\tpadding: 5px 5px 5px 10px;\r\n\t}\r\n\t\r\n\t.file-icon {\r\n\t\tmargin-right: 8px;\r\n\t\tfont-size: 18px\r\n\t}\r\n\t\r\n\t.file-name {\r\n\t\tcursor: pointer\r\n\t}\r\n\t\r\n  @media screen and (max-width: 900px) {\r\n    .fold {\r\n      width: 100%;\r\n    }\r\n  }\r\n</style>\r\n"]}]}