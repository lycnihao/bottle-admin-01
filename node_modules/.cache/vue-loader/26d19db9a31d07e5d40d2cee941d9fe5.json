{"remainingRequest":"F:\\个人git项目\\couldr-user\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\个人git项目\\couldr-user\\src\\views\\file\\FileList.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\个人git项目\\couldr-user\\src\\views\\file\\FileList.vue","mtime":1584360862759},{"path":"F:\\个人git项目\\couldr-user\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\个人git项目\\couldr-user\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\个人git项目\\couldr-user\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\个人git项目\\couldr-user\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICdUYWJsZUxpc3QnLA0KCW1vdW50ZWQgKCkJew0KCQl0aGlzLmxvYWRpbmcgPSB0cnVlDQoJCXRoaXMuJGh0dHAuZ2V0KCcvZmlsZUxpc3QnLCB7DQoJCQlwYXJhbXM6IE9iamVjdC5hc3NpZ24odGhpcy5xdWVyeVBhcmFtKQ0KCQl9KS50aGVuKHJlcyA9PiB7DQoJCQl0aGlzLmxvY2FsRGF0YVNvdXJjZSA9IHJlcw0KCQkJdGhpcy5sb2FkaW5nID0gZmFsc2UNCgkJfSkNCgl9LA0KICBkYXRhICgpIHsNCiAgICByZXR1cm4gew0KICAgICAgcXVlcnlQYXJhbToge30sDQoJCQljb2x1bW5zOglbDQoJCQkJew0KCQkJCQl0aXRsZTogJ+aWh+S7tuWQjScsDQoJCQkJCWRhdGFJbmRleDogJ2ZpbGVOYW1lJywNCgkJCQkJc2NvcGVkU2xvdHM6IHsgY3VzdG9tUmVuZGVyOiAnZmlsZU5hbWUnIH0NCgkJCQl9LA0KCQkJCXsNCgkJCQkJdGl0bGU6ICfmlofku7blpKflsI8nLA0KCQkJCQlkYXRhSW5kZXg6ICdmaWxlU2l6ZScsDQoJCQkJCXdpZHRoOiAnMTIwcHgnDQoJCQkJfSwNCgkJCQl7DQoJCQkJCXRpdGxlOiAn5L+u5pS55pel5pyfJywNCgkJCQkJZGF0YUluZGV4OiAndXBkYXRlZEF0JywNCgkJCQkJd2lkdGg6ICcxODBweCcNCgkJCQl9DQoJCQldLA0KCQkJbG9jYWxEYXRhU291cmNlOiBbXSwNCgkJCXNlbGVjdGVkUm93S2V5czogW10sDQoJCQlsb2FkaW5nOiB0cnVlLA0KCQkJY2xpY2tLZXk6IHVuZGVmaW5lZCwNCgkJCWNhY2hlUmVjb3JkOiB1bmRlZmluZWQsDQoJCQl1cGxvYWRWaXNpYmxlOiBmYWxzZSwNCgkJCXVwbG9hZEhhbmRsZXI6ICcnDQogICAgfQ0KICB9LA0KCWNvbXB1dGVkOiB7DQogICAgICBoYXNTZWxlY3RlZCgpIHsNCiAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0ZWRSb3dLZXlzLmxlbmd0aCA+IDANCiAgICAgIH0NCiAgfSwNCiAgbWV0aG9kczogew0KCQlvblVwbG9hZENsb3NlKCkgew0KCQl9LA0KCQloYW5kbGVUYWJsZUNoYW5nZSgpIHsNCiAgICAgIGNvbnNvbGUubG9nKCdoYW5kbGVUYWJsZUNoYW5nZScpDQogICAgfSwNCgkJY3VzdG9tUm93KHJlY29yZCwgaW5kZXgpIHsNCiAgICAgIHJldHVybiB7DQogICAgICAgIG9uOiB7DQoJCQkJCWRibGNsaWNrOiAoKSA9PiB7DQoJCQkJCSAgY29uc29sZS5sb2coJ2FhYScpDQoJCQkJCX0sDQoJCQkJCWNvbnRleHRtZW51OiAoZXZlbnQpID0+IHsNCgkJCQkJCWNvbnNvbGUubG9nKGV2ZW50KQ0KCQkJCQkJY29uc29sZS5sb2cocmVjb3JkKQ0KCQkJCQkJdGhpcy5jYWNoZVJlY29yZCA9IE9iamVjdC5hc3NpZ24oe30sIHJlY29yZCkNCgkJCQkJCXRoaXMuJHJlZnMuY29udGV4dG1lbnUuc2hvdyh7CXRvcDogZXZlbnQuY2xpZW50WSwJbGVmdDogZXZlbnQuY2xpZW50WAl9KQ0KCQkJCQkJd2luZG93LmV2ZW50LnJldHVyblZhbHVlCT0JZmFsc2UNCgkJCQkJCXJldHVybiBmYWxzZQ0KCQkJCQl9DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LA0KCQlzdGFydCgpIHsNCiAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZQ0KICAgICAgICAvLyBhamF4IHJlcXVlc3QgYWZ0ZXIgZW1wdHkgY29tcGxldGluZw0KICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZQ0KICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSb3dLZXlzID0gW10NCiAgICAgICAgfSwgMTAwMCkNCiAgICAgIH0sDQoJCW9uU2VsZWN0Q2hhbmdlKHNlbGVjdGVkUm93S2V5cykgew0KCQkJY29uc29sZS5sb2coJ3NlbGVjdGVkUm93S2V5cyBjaGFuZ2VkOiAnLCBzZWxlY3RlZFJvd0tleXMpDQoJCQl0aGlzLnNlbGVjdGVkUm93S2V5cyA9IHNlbGVjdGVkUm93S2V5cw0KCQl9LA0KCQloYW5kbGVDaGFuZ2UodmFsdWUsIGtleSwgY29sdW1uKSB7DQoJCQkJY29uc29sZS5sb2codmFsdWUsIGtleSwgY29sdW1uKQ0KCQkJCWNvbnN0IG5ld0RhdGEgPSBbLi4udGhpcy5sb2NhbERhdGFTb3VyY2VdDQogICAgICAgIGNvbnN0IHRhcmdldCA9IG5ld0RhdGEuZmlsdGVyKGl0ZW0gPT4ga2V5ID09PSBpdGVtLmtleSlbMF0NCiAgICAgICAgaWYgKHRhcmdldCkgew0KICAgICAgICAgIHRhcmdldFtjb2x1bW5dID0gdmFsdWUNCiAgICAgICAgICB0aGlzLmxvY2FsRGF0YVNvdXJjZSA9IG5ld0RhdGENCiAgICAgICAgfQ0KCQkJCWNvbnNvbGUubG9nKHRoaXMuY2FjaGVSZWNvcmQpDQoJCQkJLyogdGhpcy5jYWNoZVJlY29yZC5maWxlTmFtZSA9IHZhbHVlICovDQoJCX0sDQoJCXNhdmUoKSB7DQoJCQljb25zdCBrZXkgPSB0aGlzLmNsaWNrS2V5DQoJCQljb25zdCB0YXJnZXQgPSB0aGlzLmxvY2FsRGF0YVNvdXJjZS5maWx0ZXIoaXRlbSA9PiBrZXkgPT09IGl0ZW0ua2V5KVswXQ0KCQkJaWYgKHRhcmdldCkgew0KCQkJCS8vCeS/neWtmOaTjeS9nA0KCQkJfQ0KCQkJdGhpcy5jYWNoZVJlY29yZCA9IHRoaXMuY2xpY2tLZXkgPSB1bmRlZmluZWQNCgkJCX0sDQoJCQljYW5jZWwoKSB7DQoJCQkJY29uc29sZS5sb2coJ+WPlua2iCcpDQogICAgICAgIGNvbnN0IGtleSA9IHRoaXMuY2xpY2tLZXkNCiAgICAgICAgY29uc3QgdGFyZ2V0ID0gdGhpcy5sb2NhbERhdGFTb3VyY2UuZmlsdGVyKGl0ZW0gPT4ga2V5ID09PSBpdGVtLmtleSlbMF0NCiAgICAgICAgaWYgKHRhcmdldCkgew0KCQkJCQl0YXJnZXQuZmlsZU5hbWUgPSB0aGlzLmNhY2hlUmVjb3JkLmZpbGVOYW1lDQogICAgICAgIH0NCiAgICAgICAgdGhpcy5jYWNoZVJlY29yZCA9IHRoaXMuY2xpY2tLZXkgPSB1bmRlZmluZWQNCgkJCX0NCiAgfQ0KfQ0K"},{"version":3,"sources":["FileList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"FileList.vue","sourceRoot":"src/views/file","sourcesContent":["<template>\r\n  <a-card :bordered=\"false\">\r\n\t\t\r\n    <div class=\"table-page-search-wrapper operator\">\r\n\t\t\t<div class=\"file-path-tools\">\r\n\t\t\t\t<a-button shape=\"circle\" icon=\"arrow-left\" />\r\n\t\t\t\t<a-button shape=\"circle\" icon=\"arrow-up\" />\r\n\t\t\t\t<a-button shape=\"circle\" icon=\"arrow-right\" />\r\n\t\t\t\t<a-button shape=\"circle\" icon=\"redo\" />\r\n\t\t\t</div>\r\n      <a-breadcrumb class=\"file-path\">\r\n\t\t\t\t<a-breadcrumb-item>Home</a-breadcrumb-item>\r\n\t\t\t\t<a-breadcrumb-item><a href=\"\">Application Center</a></a-breadcrumb-item>\r\n\t\t\t\t<a-breadcrumb-item><a href=\"\">Application List</a></a-breadcrumb-item>\r\n\t\t\t\t<a-breadcrumb-item>An Application</a-breadcrumb-item>\r\n\t\t\t</a-breadcrumb>\r\n    </div>\r\n\t\t\r\n\t\t<div class=\"table-operator operator file-operator\">\r\n\t\t  <a-button icon=\"upload\" @click=\"uploadVisible = true\">上传</a-button>\r\n\t\t\t<a-button icon=\"folder-add\">文件夹</a-button>\r\n\t\t\t<a-button type=\"danger\">删除</a-button>\r\n\t\t  <a-dropdown v-if=\"selectedRowKeys.length > 0\">\r\n\t\t    <a-menu slot=\"overlay\">\r\n\t\t      <a-menu-item key=\"1\"><a-icon type=\"delete\" />删除</a-menu-item>\r\n\t\t      <!-- lock | unlock -->\r\n\t\t      <a-menu-item key=\"2\"><a-icon type=\"lock\" />锁定</a-menu-item>\r\n\t\t    </a-menu>\r\n\t\t    <a-button style=\"margin-left: 8px\">\r\n\t\t      更多 <a-icon type=\"down\" />\r\n\t\t    </a-button>\r\n\t\t  </a-dropdown>\r\n\t\t</div>\r\n\r\n    \r\n\r\n\t\t<a-button type=\"primary\" @click=\"start\" :disabled=\"!hasSelected\" :loading=\"loading\">\r\n\t\t\t\t\tReload\r\n\t\t</a-button>\r\n\t\t<span style=\"margin-left: 8px\">\r\n\t\t<template v-if=\"hasSelected\">\r\n\t\t\t{{\t`Selected ${selectedRowKeys.length} items`\t}}\r\n\t\t</template>\r\n\t\t</span>\r\n\t\t<a-table\r\n\t\t\tref=\"fileList\"\r\n\t\t\tsize=\"small\"\r\n      :rowSelection=\"{selectedRowKeys: selectedRowKeys, onChange: onSelectChange}\"\r\n      :columns=\"columns\"\r\n      :dataSource=\"localDataSource\"\r\n\t\t\t:loading=\"loading\"\r\n\t\t\t:pagination=\"{showSizeChanger: true,pageSize: 150,\tpageSizeOptions:\t['150', '200', '500', '1000']}\"\r\n\t\t\t:scroll=\"{ y: 420 }\"\r\n\t\t\t:customRow=\"customRow\"\r\n\t\t\t@change=\"handleTableChange\"\r\n    >\r\n\t\t\t<template\r\n\t\t\t\tv-for=\"col in ['fileName']\"\r\n\t\t\t\t:slot=\"col\"\r\n\t\t\t\tslot-scope=\"text, record\"\r\n\t\t\t>\r\n\t\t\t\t<div :key=\"col\">\r\n\t\t\t\t\t<a-input\r\n\t\t\t\t\t\tv-if=\"record.key == clickKey\"\r\n\t\t\t\t\t\tstyle=\"margin: -5px 0\"\r\n\t\t\t\t\t\t:value=\"text\"\r\n\t\t\t\t\t\t@blur=\"cancel\"\r\n\t\t\t\t\t\t@change=\"e => handleChange(e.target.value, record.key, col)\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t<a-tooltip slot=\"suffix\" title=\"保存\">\r\n\t\t\t\t\t\t<a-icon type=\"check\" style=\"color: rgba(0,0,0,.45);cursor: pointer;\" @mousedown=\"save()\"/>\r\n\t\t\t\t\t</a-tooltip>\r\n\t\t\t\t\t</a-input>\r\n\t\t\t\t\t<template v-else><span class=\"file-icon\"><a-icon type=\"folder\" /></span><span class=\"file-name\">{{ text }}</span></template>\r\n\t\t\t\t</div>\r\n\t\t\t</template>\r\n\t\t</a-table>\r\n\t\t<a-modal\r\n\t\t  title=\"上传附件\"\r\n\t\t  v-model=\"uploadVisible\"\r\n\t\t  :footer=\"null\"\r\n\t\t  :afterClose=\"onUploadClose\"\r\n\t\t  destroyOnClose\r\n\t\t>\r\n\t\t  <FilePondUpload\r\n\t\t    ref=\"upload\"\r\n\t\t    :uploadHandler=\"uploadHandler\"\r\n\t\t  ></FilePondUpload>\r\n\t\t</a-modal>\r\n\t\t<v-contextmenu ref=\"contextmenu\">\r\n\t\t\t<v-contextmenu-item>新建文件夹</v-contextmenu-item>\r\n\t\t\t<v-contextmenu-item @click=\"clickKey = cacheRecord.key\">重命名</v-contextmenu-item>\r\n\t\t\t<v-contextmenu-item>删除</v-contextmenu-item>\r\n\t\t</v-contextmenu>\r\n\t\t</a-card>\r\n\t</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'TableList',\r\n\tmounted ()\t{\r\n\t\tthis.loading = true\r\n\t\tthis.$http.get('/fileList', {\r\n\t\t\tparams: Object.assign(this.queryParam)\r\n\t\t}).then(res => {\r\n\t\t\tthis.localDataSource = res\r\n\t\t\tthis.loading = false\r\n\t\t})\r\n\t},\r\n  data () {\r\n    return {\r\n      queryParam: {},\r\n\t\t\tcolumns:\t[\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: '文件名',\r\n\t\t\t\t\tdataIndex: 'fileName',\r\n\t\t\t\t\tscopedSlots: { customRender: 'fileName' }\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: '文件大小',\r\n\t\t\t\t\tdataIndex: 'fileSize',\r\n\t\t\t\t\twidth: '120px'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: '修改日期',\r\n\t\t\t\t\tdataIndex: 'updatedAt',\r\n\t\t\t\t\twidth: '180px'\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\tlocalDataSource: [],\r\n\t\t\tselectedRowKeys: [],\r\n\t\t\tloading: true,\r\n\t\t\tclickKey: undefined,\r\n\t\t\tcacheRecord: undefined,\r\n\t\t\tuploadVisible: false,\r\n\t\t\tuploadHandler: ''\r\n    }\r\n  },\r\n\tcomputed: {\r\n      hasSelected() {\r\n        return this.selectedRowKeys.length > 0\r\n      }\r\n  },\r\n  methods: {\r\n\t\tonUploadClose() {\r\n\t\t},\r\n\t\thandleTableChange() {\r\n      console.log('handleTableChange')\r\n    },\r\n\t\tcustomRow(record, index) {\r\n      return {\r\n        on: {\r\n\t\t\t\t\tdblclick: () => {\r\n\t\t\t\t\t  console.log('aaa')\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcontextmenu: (event) => {\r\n\t\t\t\t\t\tconsole.log(event)\r\n\t\t\t\t\t\tconsole.log(record)\r\n\t\t\t\t\t\tthis.cacheRecord = Object.assign({}, record)\r\n\t\t\t\t\t\tthis.$refs.contextmenu.show({\ttop: event.clientY,\tleft: event.clientX\t})\r\n\t\t\t\t\t\twindow.event.returnValue\t=\tfalse\r\n\t\t\t\t\t\treturn false\r\n\t\t\t\t\t}\r\n        }\r\n      }\r\n    },\r\n\t\tstart() {\r\n        this.loading = true\r\n        // ajax request after empty completing\r\n        setTimeout(() => {\r\n          this.loading = false\r\n          this.selectedRowKeys = []\r\n        }, 1000)\r\n      },\r\n\t\tonSelectChange(selectedRowKeys) {\r\n\t\t\tconsole.log('selectedRowKeys changed: ', selectedRowKeys)\r\n\t\t\tthis.selectedRowKeys = selectedRowKeys\r\n\t\t},\r\n\t\thandleChange(value, key, column) {\r\n\t\t\t\tconsole.log(value, key, column)\r\n\t\t\t\tconst newData = [...this.localDataSource]\r\n        const target = newData.filter(item => key === item.key)[0]\r\n        if (target) {\r\n          target[column] = value\r\n          this.localDataSource = newData\r\n        }\r\n\t\t\t\tconsole.log(this.cacheRecord)\r\n\t\t\t\t/* this.cacheRecord.fileName = value */\r\n\t\t},\r\n\t\tsave() {\r\n\t\t\tconst key = this.clickKey\r\n\t\t\tconst target = this.localDataSource.filter(item => key === item.key)[0]\r\n\t\t\tif (target) {\r\n\t\t\t\t//\t保存操作\r\n\t\t\t}\r\n\t\t\tthis.cacheRecord = this.clickKey = undefined\r\n\t\t\t},\r\n\t\t\tcancel() {\r\n\t\t\t\tconsole.log('取消')\r\n        const key = this.clickKey\r\n        const target = this.localDataSource.filter(item => key === item.key)[0]\r\n        if (target) {\r\n\t\t\t\t\ttarget.fileName = this.cacheRecord.fileName\r\n        }\r\n        this.cacheRecord = this.clickKey = undefined\r\n\t\t\t}\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n\t.editable-row-operations a {\r\n    margin-right: 8px;\r\n  }\r\n  .search {\r\n    margin-bottom: 54px;\r\n  }\r\n\r\n  .fold {\r\n    width: calc(100% - 216px);\r\n    display: inline-block\r\n  }\r\n\r\n  .operator {\r\n    margin-bottom: 18px;\r\n  }\r\n\t\r\n\t.file-operator > .ant-btn{\r\n\t\tmargin-right: 8px;\r\n\t}\r\n\t\r\n\t.file-path-tools {\r\n\t\tposition: absolute;\r\n\t}\r\n\t\r\n\t.file-path-tools button{\r\n\t\tfont-size: 14px;\r\n\t\tborder: 1px solid transparent;\r\n\t}\r\n\t\r\n\t.file-path-tools button:hover {\r\n\t  background-color: #f8f8f8;\r\n\t}\r\n\t\r\n\t.file-path {\r\n\t\tmargin-left: 150px;\r\n\t\tbackground-color: #f1f3f4;\r\n\t\tborder-radius: 14px;\r\n\t\tpadding: 5px 5px 5px 10px;\r\n\t}\r\n\t\r\n\t.file-icon {\r\n\t\tmargin-right: 5px;\r\n\t\tfont-size: 18px\r\n\t}\r\n\t\r\n\t.file-name {\r\n\t\tcursor: pointer\r\n\t}\r\n\t\r\n  @media screen and (max-width: 900px) {\r\n    .fold {\r\n      width: 100%;\r\n    }\r\n  }\r\n</style>\r\n"]}]}