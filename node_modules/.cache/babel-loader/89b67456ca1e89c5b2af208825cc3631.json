{"remainingRequest":"D:\\iksen\\个人git项目\\squirrel-admin\\node_modules\\babel-loader\\lib\\index.js!D:\\iksen\\个人git项目\\squirrel-admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\iksen\\个人git项目\\squirrel-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\iksen\\个人git项目\\squirrel-admin\\src\\components\\Upload\\FilePondUpload.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\iksen\\个人git项目\\squirrel-admin\\src\\components\\Upload\\FilePondUpload.vue","mtime":1586223528241},{"path":"D:\\iksen\\个人git项目\\squirrel-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1586223459088},{"path":"D:\\iksen\\个人git项目\\squirrel-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1586223449822},{"path":"D:\\iksen\\个人git项目\\squirrel-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1586223459088},{"path":"D:\\iksen\\个人git项目\\squirrel-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1586223523515}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCB2dWVGaWxlUG9uZCBmcm9tICd2dWUtZmlsZXBvbmQnOwppbXBvcnQgJ2ZpbGVwb25kL2Rpc3QvZmlsZXBvbmQubWluLmNzcyc7IC8vIFBsdWdpbnMKCmltcG9ydCBGaWxlUG9uZFBsdWdpbkltYWdlUHJldmlldyBmcm9tICdmaWxlcG9uZC1wbHVnaW4taW1hZ2UtcHJldmlldyc7CmltcG9ydCAnZmlsZXBvbmQtcGx1Z2luLWltYWdlLXByZXZpZXcvZGlzdC9maWxlcG9uZC1wbHVnaW4taW1hZ2UtcHJldmlldy5taW4uY3NzJzsgLy8gQ3JlYXRlIGNvbXBvbmVudCBhbmQgcmVnaXN0IHBsdWdpbnMKCnZhciBGaWxlUG9uZCA9IHZ1ZUZpbGVQb25kKEZpbGVQb25kUGx1Z2luSW1hZ2VQcmV2aWV3KTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdGaWxlUG9uZFVwbG9hZCcsCiAgY29tcG9uZW50czogewogICAgRmlsZVBvbmQ6IEZpbGVQb25kCiAgfSwKICBwcm9wczogewogICAgbmFtZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgZGVmYXVsdDogJ2ZpbGUnCiAgICB9LAogICAgZmlsZWQ6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgIGRlZmF1bHQ6ICcnCiAgICB9LAogICAgbXVsdGlwbGU6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICBkZWZhdWx0OiB0cnVlCiAgICB9LAogICAgYWNjZXB0OiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICBkZWZhdWx0OiAnJwogICAgfSwKICAgIGxhYmVsOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICBkZWZhdWx0OiAn54K55Ye76YCJ5oup5paH5Lu25oiW5bCG5paH5Lu25ouW5ou95Yiw5q2k5aSEJwogICAgfSwKICAgIHVwbG9hZEhhbmRsZXI6IHsKICAgICAgdHlwZTogRnVuY3Rpb24sCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9LAogICAgcGF0aDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgZGVmYXVsdDogJy8nCiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICByZXR1cm4gewogICAgICBzZXJ2ZXI6IHsKICAgICAgICBwcm9jZXNzOiBmdW5jdGlvbiBwcm9jZXNzKGZpZWxkTmFtZSwgZmlsZSwgbWV0YWRhdGEsIGxvYWQsIGVycm9yLCBwcm9ncmVzcywgX2Fib3J0KSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhfdGhpcy5wYXRoKTsKICAgICAgICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdwYXRoJywgX3RoaXMucGF0aCk7CiAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoZmllbGROYW1lLCBmaWxlLCBmaWxlLm5hbWUpOwogICAgICAgICAgdmFyIENhbmNlbFRva2VuID0gYXhpb3MuQ2FuY2VsVG9rZW47CiAgICAgICAgICB2YXIgc291cmNlID0gQ2FuY2VsVG9rZW4uc291cmNlKCk7CgogICAgICAgICAgX3RoaXMudXBsb2FkSGFuZGxlcihmb3JtRGF0YSwgZnVuY3Rpb24gKHByb2dyZXNzRXZlbnQpIHsKICAgICAgICAgICAgaWYgKHByb2dyZXNzRXZlbnQudG90YWwgPiAwKSB7CiAgICAgICAgICAgICAgcHJvZ3Jlc3MocHJvZ3Jlc3NFdmVudC5sZW5ndGhDb21wdXRhYmxlLCBwcm9ncmVzc0V2ZW50LmxvYWRlZCwgcHJvZ3Jlc3NFdmVudC50b3RhbCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIHNvdXJjZS50b2tlbiwgX3RoaXMuZmlsZWQsIGZpbGUpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCd0aGVuJyk7CiAgICAgICAgICAgIGxvYWQocmVzcG9uc2UpOwogICAgICAgICAgICAvKiB0aGlzLiRsb2cuZGVidWcoJ1VwbG9hZGVkIHN1Y2Nlc3NmdWxseScsIHJlc3BvbnNlKSAqLwoKICAgICAgICAgICAgY29uc29sZS5sb2coJ1VwbG9hZGVkIHN1Y2Nlc3NmdWxseScgKyByZXNwb25zZSk7CgogICAgICAgICAgICBfdGhpcy4kZW1pdCgnc3VjY2VzcycsIHJlc3BvbnNlLCBmaWxlKTsKICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChmYWlsdXJlKSB7CiAgICAgICAgICAgIC8qIHRoaXMuJGxvZy5kZWJ1ZygnRmFpbGVkIHRvIHVwbG9hZCBmaWxlJywgZmFpbHVyZSkgKi8KICAgICAgICAgICAgY29uc29sZS5sb2coJ0ZhaWxlZCB0byB1cGxvYWQgZmlsZScgKyBmYWlsdXJlKTsKCiAgICAgICAgICAgIF90aGlzLiRlbWl0KCdmYWlsdXJlJywgZmFpbHVyZSwgZmlsZSk7CgogICAgICAgICAgICBlcnJvcigpOwogICAgICAgICAgfSk7CgogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgYWJvcnQ6IGZ1bmN0aW9uIGFib3J0KCkgewogICAgICAgICAgICAgIF9hYm9ydCgpOwogICAgICAgICAgICAgIC8qIHRoaXMuJGxvZy5kZWJ1ZygnVXBsb2FkIG9wZXJhdGlvbiBhYm9ydGVkIGJ5IHRoZSB1c2VyJykgKi8KCgogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdVcGxvYWQgb3BlcmF0aW9uIGFib3J0ZWQgYnkgdGhlIHVzZXInKTsKICAgICAgICAgICAgICBzb3VyY2UuY2FuY2VsKCdVcGxvYWQgb3BlcmF0aW9uIGNhbmNlbGVkIGJ5IHRoZSB1c2VyLicpOwogICAgICAgICAgICB9CiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgZmlsZUxpc3Q6IFtdLAogICAgICBhdHRhY2htZW50X3VwbG9hZF9tYXhfcGFyYWxsZWxfdXBsb2FkczogJycsCiAgICAgIGF0dGFjaG1lbnRfdXBsb2FkX2ltYWdlX3ByZXZpZXdfZW5hYmxlOiAnJywKICAgICAgYXR0YWNobWVudF91cGxvYWRfbWF4X2ZpbGVzOiBudWxsCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlRmlsZVBvbmRJbml0OiBmdW5jdGlvbiBoYW5kbGVGaWxlUG9uZEluaXQoKSB7CiAgICAgIC8qIHRoaXMuJGxvZy5kZWJ1ZygnRmlsZVBvbmQgaGFzIGluaXRpYWxpemVkJykgKi8KICAgICAgY29uc29sZS5sb2coJ0ZpbGVQb25kIGhhcyBpbml0aWFsaXplZCcpOwogICAgfSwKICAgIGhhbmRsZUNsZWFyRmlsZUxpc3Q6IGZ1bmN0aW9uIGhhbmRsZUNsZWFyRmlsZUxpc3QoKSB7CiAgICAgIHRoaXMuJHJlZnMucG9uZC5yZW1vdmVGaWxlcygpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["FilePondUpload.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AA0BA,OAAA,KAAA,MAAA,OAAA;AAEA,OAAA,WAAA,MAAA,cAAA;AACA,OAAA,gCAAA,C,CAEA;;AACA,OAAA,0BAAA,MAAA,+BAAA;AACA,OAAA,0EAAA,C,CAEA;;AACA,IAAA,QAAA,GAAA,WAAA,CAAA,0BAAA,CAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,gBADA;AAEA,EAAA,UAAA,EAAA;AACA,IAAA,QAAA,EAAA;AADA,GAFA;AAKA,EAAA,KAAA,EAAA;AACA,IAAA,IAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,QAAA,EAAA,KAFA;AAGA,MAAA,OAAA,EAAA;AAHA,KADA;AAMA,IAAA,KAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,QAAA,EAAA,KAFA;AAGA,MAAA,OAAA,EAAA;AAHA,KANA;AAWA,IAAA,QAAA,EAAA;AACA,MAAA,IAAA,EAAA,OADA;AAEA,MAAA,QAAA,EAAA,KAFA;AAGA,MAAA,OAAA,EAAA;AAHA,KAXA;AAgBA,IAAA,MAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,QAAA,EAAA,KAFA;AAGA,MAAA,OAAA,EAAA;AAHA,KAhBA;AAqBA,IAAA,KAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,QAAA,EAAA,KAFA;AAGA,MAAA,OAAA,EAAA;AAHA,KArBA;AA0BA,IAAA,aAAA,EAAA;AACA,MAAA,IAAA,EAAA,QADA;AAEA,MAAA,QAAA,EAAA;AAFA,KA1BA;AA8BA,IAAA,IAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,QAAA,EAAA,KAFA;AAGA,MAAA,OAAA,EAAA;AAHA;AA9BA,GALA;AAyCA,EAAA,IAAA,EAAA,gBAAA;AAAA;;AACA,WAAA;AACA,MAAA,MAAA,EAAA;AACA,QAAA,OAAA,EAAA,iBAAA,SAAA,EAAA,IAAA,EAAA,QAAA,EAAA,IAAA,EAAA,KAAA,EAAA,QAAA,EAAA,MAAA,EAAA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,KAAA,CAAA,IAAA;AACA,cAAA,QAAA,GAAA,IAAA,QAAA,EAAA;AACA,UAAA,QAAA,CAAA,MAAA,CAAA,MAAA,EAAA,KAAA,CAAA,IAAA;AACA,UAAA,QAAA,CAAA,MAAA,CAAA,SAAA,EAAA,IAAA,EAAA,IAAA,CAAA,IAAA;AACA,cAAA,WAAA,GAAA,KAAA,CAAA,WAAA;AACA,cAAA,MAAA,GAAA,WAAA,CAAA,MAAA,EAAA;;AACA,UAAA,KAAA,CAAA,aAAA,CACA,QADA,EAEA,UAAA,aAAA,EAAA;AACA,gBAAA,aAAA,CAAA,KAAA,GAAA,CAAA,EAAA;AACA,cAAA,QAAA,CAAA,aAAA,CAAA,gBAAA,EAAA,aAAA,CAAA,MAAA,EAAA,aAAA,CAAA,KAAA,CAAA;AACA;AACA,WANA,EAOA,MAAA,CAAA,KAPA,EAQA,KAAA,CAAA,KARA,EASA,IATA,EAWA,IAXA,CAWA,UAAA,QAAA,EAAA;AACA,YAAA,OAAA,CAAA,GAAA,CAAA,MAAA;AACA,YAAA,IAAA,CAAA,QAAA,CAAA;AACA;;AACA,YAAA,OAAA,CAAA,GAAA,CAAA,0BAAA,QAAA;;AACA,YAAA,KAAA,CAAA,KAAA,CAAA,SAAA,EAAA,QAAA,EAAA,IAAA;AACA,WAjBA,EAkBA,KAlBA,CAkBA,UAAA,OAAA,EAAA;AACA;AACA,YAAA,OAAA,CAAA,GAAA,CAAA,0BAAA,OAAA;;AACA,YAAA,KAAA,CAAA,KAAA,CAAA,SAAA,EAAA,OAAA,EAAA,IAAA;;AACA,YAAA,KAAA;AACA,WAvBA;;AAwBA,iBAAA;AACA,YAAA,KAAA,EAAA,iBAAA;AACA,cAAA,MAAA;AACA;;;AACA,cAAA,OAAA,CAAA,GAAA,CAAA,sCAAA;AACA,cAAA,MAAA,CAAA,MAAA,CAAA,wCAAA;AACA;AANA,WAAA;AAQA;AAxCA,OADA;AA2CA,MAAA,QAAA,EAAA,EA3CA;AA4CA,MAAA,sCAAA,EAAA,EA5CA;AA6CA,MAAA,sCAAA,EAAA,EA7CA;AA8CA,MAAA,2BAAA,EAAA;AA9CA,KAAA;AAgDA,GA1FA;AA2FA,EAAA,OAAA,EAAA;AACA,IAAA,kBADA,gCACA;AACA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,0BAAA;AACA,KAJA;AAKA,IAAA,mBALA,iCAKA;AACA,WAAA,KAAA,CAAA,IAAA,CAAA,WAAA;AACA;AAPA;AA3FA,CAAA","sourcesContent":["<template>\r\n  <div>\r\n    <file-pond\r\n      ref=\"pond\"\r\n      :label-idle=\"label\"\r\n      :name=\"name\"\r\n      :allow-multiple=\"multiple\"\r\n      :allowRevert=\"false\"\r\n      :accepted-file-types=\"accept\"\r\n      :maxParallelUploads=\"attachment_upload_max_parallel_uploads\"\r\n      :allowImagePreview=\"attachment_upload_image_preview_enable\"\r\n      :maxFiles=\"attachment_upload_max_files\"\r\n      labelFileProcessing=\"上传中\"\r\n      labelFileProcessingComplete=\"上传完成\"\r\n      labelFileProcessingAborted=\"取消上传\"\r\n      labelFileProcessingError=\"上传错误\"\r\n      labelTapToCancel=\"点击取消\"\r\n      labelTapToRetry=\"点击重试\"\r\n      :files=\"fileList\"\r\n      :server=\"server\"\r\n      @init=\"handleFilePondInit\"\r\n    >\r\n    </file-pond>\r\n  </div>\r\n</template>\r\n<script>\r\nimport axios from 'axios'\r\n\r\nimport vueFilePond from 'vue-filepond'\r\nimport 'filepond/dist/filepond.min.css'\r\n\r\n// Plugins\r\nimport FilePondPluginImagePreview from 'filepond-plugin-image-preview'\r\nimport 'filepond-plugin-image-preview/dist/filepond-plugin-image-preview.min.css'\r\n\r\n// Create component and regist plugins\r\nconst FilePond = vueFilePond(FilePondPluginImagePreview)\r\nexport default {\r\n  name: 'FilePondUpload',\r\n  components: {\r\n    FilePond\r\n  },\r\n  props: {\r\n    name: {\r\n      type: String,\r\n      required: false,\r\n      default: 'file'\r\n    },\r\n    filed: {\r\n      type: String,\r\n      required: false,\r\n      default: ''\r\n    },\r\n    multiple: {\r\n      type: Boolean,\r\n      required: false,\r\n      default: true\r\n    },\r\n    accept: {\r\n      type: String,\r\n      required: false,\r\n      default: ''\r\n    },\r\n    label: {\r\n      type: String,\r\n      required: false,\r\n      default: '点击选择文件或将文件拖拽到此处'\r\n    },\r\n    uploadHandler: {\r\n      type: Function,\r\n      required: true\r\n    },\r\n\t\tpath: {\r\n\t\t  type: String,\r\n\t\t  required: false,\r\n\t\t  default: '/'\r\n\t\t}\r\n  },\r\n  data: function() {\r\n    return {\r\n      server: {\r\n        process: (fieldName, file, metadata, load, error, progress, abort) => {\r\n\t\t\t\t\tconsole.log(this.path)\r\n          const formData = new FormData()\r\n\t\t\t\t\tformData.append('path', this.path)\r\n          formData.append(fieldName, file, file.name)\r\n          const CancelToken = axios.CancelToken\r\n          const source = CancelToken.source()\r\n          this.uploadHandler(\r\n            formData,\r\n            progressEvent => {\r\n              if (progressEvent.total > 0) {\r\n                progress(progressEvent.lengthComputable, progressEvent.loaded, progressEvent.total)\r\n              }\r\n            },\r\n            source.token,\r\n            this.filed,\r\n            file\r\n          )\r\n            .then(response => {\r\n\t\t\t\t\t\t\tconsole.log('then')\r\n              load(response)\r\n              /* this.$log.debug('Uploaded successfully', response) */\r\n\t\t\t\t\t\t\tconsole.log('Uploaded successfully' + response)\r\n              this.$emit('success', response, file)\r\n            })\r\n            .catch(failure => {\r\n              /* this.$log.debug('Failed to upload file', failure) */\r\n\t\t\t\t\t\t\tconsole.log('Failed to upload file' + failure)\r\n              this.$emit('failure', failure, file)\r\n              error()\r\n            })\r\n          return {\r\n            abort: () => {\r\n              abort()\r\n              /* this.$log.debug('Upload operation aborted by the user') */\r\n\t\t\t\t\t\t\tconsole.log('Upload operation aborted by the user')\r\n              source.cancel('Upload operation canceled by the user.')\r\n            }\r\n          }\r\n        }\r\n      },\r\n      fileList: [],\r\n\t\t\tattachment_upload_max_parallel_uploads: '',\r\n\t\t\tattachment_upload_image_preview_enable: '',\r\n\t\t\tattachment_upload_max_files: null\r\n    }\r\n  },\r\n  methods: {\r\n    handleFilePondInit() {\r\n      /* this.$log.debug('FilePond has initialized') */\r\n\t\t\tconsole.log('FilePond has initialized')\r\n    },\r\n    handleClearFileList() {\r\n      this.$refs.pond.removeFiles()\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n</style>\r\n"],"sourceRoot":"src/components/Upload"}]}